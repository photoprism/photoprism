package face

import (
	"testing"

	"github.com/stretchr/testify/assert"
)

func TestEmbedding_Kind(t *testing.T) {
	t.Run("Kids", func(t *testing.T) {
		e := Embedding{0.00956450719281242, 0.017594281506414216, 0.0034308274819826088, 0.024433304607454274, 0.03652508157150199, 0.01116447955266469, -0.0006183593003596696, -0.0010943688685074449, 0.012357249196308354, 0.07457883842289448, 0.11295248899194929, -0.02418406752662526, -0.03966302269448837, -0.029571157983607717, 0.012989095386324657, -0.01884545675582356, -0.0069224719061619705, 0.03909949171874258, -0.02592672230417116, 0.013062778420539366, 0.015368576777594475, -0.009386404443325268, 0.038085957161254354, -0.07454640790820122, -0.08851962122652265, 0.03059599507186148, -0.002311327417070667, -0.026430425544579823, -0.06707751088672215, 0.02089460481268664, -0.01521601515479334, 0.030341569748189714, -0.0012923568590647644, 0.06852907459768984, 0.00929470748330156, 0.0015921768240837587, 0.01932051172479987, -0.005583951042758094, -0.028357081613244697, -0.015834319405257702, -0.007910402310598228, -0.010658817055324713, 0.01000140067966034, 0.053078942828708224, -0.030584194386998814, 0.015025267015314765, -0.013891826978781156, -0.006699096670167314, -0.060938968426651426, -0.053249146375391215, 0.02276569032013261, -0.04673161241225898, 0.016461304233719904, 0.045863549328512616, -0.04880381665296025, -0.034031555263532534, -0.026937679646329746, 0.03530077305104998, -0.05340263620018959, 0.04798200478156408, -0.025280179145435493, 0.02274432245434986, -0.07815711489982075, -0.00208588682128013, -0.020324266308711633, -0.04560547932568523, -0.026446496395187244, -0.04672709583408303, 0.03089646663930681, 0.0329096753978067, -0.0031386990772767197, 0.0030701529855529466, 0.01198785288983749, -0.0720665372080273, 0.016065222754453618, -0.008565091230492625, -0.06524603068828583, 0.014324400331436967, 0.012642266590976052, 0.03916913395126661, 0.017239611298363242, -0.0022940708117352594, -0.00000737705785367224, -0.013188478122982714, 0.023865339604930744, 0.08236957093079884, -0.019251494202762842, 0.05471697532468372, 0.005972680687490437, 0.040493461613853775, -0.0688300368686517, 0.004474718201284607, -0.04370514086137215, 0.008753968299263053, 0.07228374770945972, 0.007629580582336833, 0.03886009587181939, 0.08576714330249363, -0.021909458562731743, -0.010310174200438067, 0.011320573885718154, 0.05167221174471908, -0.011920124732164873, 0.09136995921532313, 0.07861344681845771, -0.02466051270150476, 0.03293021395802498, -0.031370491824216314, -0.006256768428203132, -0.028057354321289394, -0.001464772762523757, 0.015254409194716977, -0.02345223191918598, -0.11720789555046293, -0.03956084408693843, 0.017618920240137313, 0.02171551130918993, 0.000804237904958427, 0.0040997833841376835, 0.05092603630489773, 0.010734342167981796, -0.024763399010731116, -0.05916011126505004, 0.013965856510266248, -0.015584999747160409, -0.07232196339302593, 0.00037505472492840554, -0.004479492106636624, 0.006297527954706715, -0.043400421945585146, -0.02631447795364592, 0.06060819741752413, 0.06364250307281812, -0.014363453361309238, 0.0452708558489879, 0.02589565556910303, 0.010107092559337616, -0.04670443137486776, -0.054579869016177125, 0.1046515769428677, 0.029628220428195264, 0.019528768439259794, -0.05553832401831945, 0.07381440409355694, -0.06197152224679788, -0.03346837612075938, -0.028401009428004425, 0.045492336774865784, -0.014222729860598015, 0.052605656906962395, 0.028711968515482213, -0.006189175881445408, -0.039265539290176496, 0.017252425456212625, 0.018786909783052072, 0.013216451851702813, -0.07228060687581699, 0.06143035077386432, -0.029247661742071312, -0.07368612289428711, 0.06836203527119425, 0.045540636819269925, -0.06008780002593994, 0.053936791916688286, 0.016778231805397406, -0.006840274158296072, -0.053641265258193016, -0.027871736118363008, 0.025869831843819056, 0.071573406457901, 0.014396547469206981, -0.009195981288535727, -0.07452616840600967, 0.013345200232935086, -0.016935504455533292, 0.049057218349642225, -0.01680893502715561, -0.014038488268852234, -0.022829299352856144, -0.059434341887633, -0.012434359924453828, 0.04231061150009433, 0.01735861397658785, 0.052751378466685615, 0.035937425990899406, 0.0220693277919458, 0.09581007974015342, 0.052584730088710785, 0.04224762465390894, 0.03516049683094025, 0.05461937189102173, 0.027251388049787946, 0.04605957410401768, -0.05316027129689852, 0.07284069102671412, -0.03601164950264825, -0.03515230264100763, 0.024848973895940516, 0.018131214219869837, -0.0005673166467911667, 0.09281168133020401, -0.01841116055018372, 0.04431105674140983, -0.022182180391003687, -0.0011550109031506712, 0.1312924474477768, 0.01592384051117632, 0.011137459174885104, 0.024446219205856323, 0.007765962380088038, -0.043042239215638906, -0.054043336460987725, 0.026125866919755936, -0.05938888258404202, -0.01505894141478671, -0.07235014769766066, 0.025598893976873822, 0.06189072959952884, 0.010129067490601705, 0.0798807301455074, -0.011724631618967073, -0.027017276161738362, 0.04092693328857422, -0.015599953812650509, 0.045602697051233716, -0.018599940256939992, 0.010273827201065918, 0.03422223191915287, -0.06518438417050573, 0.03480341430339548, 0.010534410752976934, 0.05929994355473253, -0.1059915026028951, -0.004690915671138403, 0.0176001051440835, -0.028789587318897247, -0.0008820632776607656, -0.01912516790131728, -0.03659702175193363, 0.02925850057767497, -0.006651972692149381, 0.03585423529148102, 0.004146564590175533, 0.07956291197074784, 0.011424321487235526, 0.06981112021538946, -0.012405176181346178, 0.045626538081301585, 0.03736268056349622, 0.04791162866685125, -0.00340089900419116, 0.024297866853885353, 0.10473044878906673, -0.058053700460328, -0.0478491158121162, 0.02280241163033578, -0.04503581734995047, 0.05154827834727863, 0.04939925236006578, -0.0032965411535567707, 0.024689303762796853, -0.03474749873081843, 0.04177183575100369, 0.0612266067829397, -0.017530236755394273, -0.002992505000697242, 0.038245580780009426, 0.029071697654823463, -0.0017085750199233491, -0.06656611462434132, 0.017400852262249425, -0.032034329863058195, 0.01248814820105003, 0.038716979428297944, 0.026905361666447587, 0.028665946796536446, -0.029912837884492345, 0.0011884293182649547, -0.07279362322555648, -0.018983382317754958, -0.0682681186331643, 0.10368894537289937, -0.006382284530748923, -0.04440281209018496, -0.08117666881945398, -0.030362199578020308, 0.0378638267931011, 0.008926777194978463, -0.008873912919726636, -0.018600086940245494, 0.039435300769077405, -0.04833844924966494, -0.005534950776361964, 0.04187685540980763, -0.00920979937331544, -0.06032300740480423, 0.04529076235161887, -0.017920835289664358, -0.009011213628885647, -0.04398277898629507, -0.011301302079421779, 0.03356585796508524, -0.06062525371089578, 0.010255272189776102, 0.029481254854343004, -0.0019921630672696563, -0.03161581791937351, 0.018223024904727936, 0.028269319277670648, -0.01717748982708953, 0.003151409237438606, 0.03445811424818304, 0.013116849948548608, -0.03361893124464485, 0.11243294345008002, -0.02414778031137151, 0.0009398051123652193, 0.03513648216095236, 0.07822070995138751, -0.06039799335930082, -0.046241684506336846, 0.01664898373888314, -0.022302107587974105, 0.023223551197184458, -0.03896974565254317, 0.02107381272233195, 0.014257466317050986, 0.08389275272687276, 0.06136741447779867, 0.02696629727466239, 0.025725652567214437, 0.03333099941826529, -0.06944898805684513, 0.03385308446983496, 0.03951059985491964, 0.05811662061346902, 0.04349600813455052, -0.02805554157950812, -0.05582492627824346, -0.05247949043081866, 0.04473223413030306, -0.0070410499400976635, 0.01720123179256916, -0.021176138970380027, -0.03261649919052919, -0.02008709663318263, -0.02541356365610328, 0.030320773625539407, -0.02636879589408636, -0.02746961617635356, 0.004731823146964113, 0.05784605319301287, -0.008771000119547049, 0.002482125690827767, 0.03873592014941904, 0.013244514612274038, 0.016256491776504036, 0.039643339812755585, -0.04349886460436715, -0.024448473394537967, -0.025856203503078885, 0.021381820138129923, -0.04026743065979746, -0.07614113349053594, -0.024597936309874058, -0.025117785876823798, -0.007596029369677935, 0.01889244622240464, 0.00006782920617196296, -0.027720228872365422, -0.04852603831224971, -0.045822552094856896, -0.004668864376273834, 0.04860494968791803, -0.00599650407416953, 0.029392837443285517, 0.07024536571568912, 0.046713153935141034, -0.03505657706409693, 0.032767738836507, 0.03666515834629536, -0.06098963278863165, -0.02862372797810369, 0.010534445004951622, 0.05224730529718929, -0.043354966367284455, 0.021389764681872394, 0.020172426477074623, -0.0013402456663445467, 0.03145651849141965, -0.015751932592441637, 0.039305776771571904, -0.024094444130443864, 0.023116414435207844, 0.0010459598803815122, -0.03311869822856453, -0.04304084005869097, 0.035308302380144596, 0.02648943393594689, -0.0433658417314291, -0.030366347067885928, -0.03036927328341537, 0.09163435217407015, -0.007137416861951351, 0.04118875631441673, 0.04462467837664816, 0.0186937279585335, -0.03797590256565147, 0.04514540338681804, -0.008639660534552403, 0.0762030142876837, -0.0134583566751745, 0.022655908277051315, 0.004643273462230961, -0.08652641003330548, 0.013738796567647822, -0.01377079894559251, -0.024995700663162604, -0.030371163143879838, -0.030448109946317144, 0.10791386249992582, -0.030183505473865405, -0.005543621140532196, 0.008693856497605642, -0.04184898133907053, 0.08765134463707606, -0.02371981895218293, -0.06641878601577547, 0.03483888072272142, -0.03773280315928989, -0.0074731065089710886, 0.003471121376302714, 0.023200226844184928, -0.01573064975026581, 0.04564601777949267, 0.021612754712502163, -0.060529693961143494, -0.013140015716392858, -0.07159835886624125, -0.02568271808559075, -0.11435804019371669, 0.06617429562740856, 0.01995501708653238, 0.06415391175283326, 0.008545574770929912, -0.018575870121518772, -0.03251912569006284, 0.016798952232218452, -0.018335888563241396, -0.06809450437625249, -0.019734525406319234, -0.00015986069209045835, 0.061214266137944326, -0.020642005088221695, -0.04399915991557969, 0.0065624537463817335, -0.033284927614861064, 0.116939311226209, 0.06487316679623392, -0.0008064880967140198, 0.0827075880434778, 0.1045238475004832, 0.08511008736160067, -0.02596275084134605, 0.011347602431972822, 0.014439393759756867, -0.038869811635878354, -0.032146183508707, -0.008580799059321484, -0.0341539511250125, 0.011072635081493191, -0.1035624932911661, -0.029690628353920247, -0.0640309527516365, -0.05696413459049331, 0.042117324036856495, 0.07128431068526374, 0.040064464840624064, 0.005983394088010148, -0.00667726600335704, 0.047270469160543546, 0.005897726627558263, -0.0368763098700179, -0.023564390579445496, 0.006459848179171483, 0.009426389351978691, -0.047467888643344246, 0.03504645437674804, -0.005881637114928001, -0.09620188259416157, -0.025261664763092995, -0.04608574716581239, -0.0177506600610084, 0.06423448212444782, 0.03958735977196031, 0.011297762950157953, -0.004669215297326446, -0.002415396169655853, 0.06259037305911382, -0.029752894615133602, -0.0592656247317791, -0.01600239688478824, 0.04226608822743098, -0.011972974494306577, -0.012937591902704703, -0.006532240995309419, 0.014907695611731874, -0.002943116544176721, 0.03677781733373801, -0.04577133432030678, -0.011399532060345842, 0.029993985469142597}
		assert.Equal(t, KidsFace, e.Kind())
	})
	t.Run("Ignored", func(t *testing.T) {
		e := Embedding{-0.00067741907, -0.0473858, -0.055704225, 0.066581585, 0.005290037, 0.03822874, -0.05082791, 0.049087, 0.018308854, -0.01478969, -0.0017964382, 0.057903986, -0.02245441, -0.033446193, -0.0071987803, -0.03150515, 0.017724376, 0.019948162, 0.056362633, -0.11701946, -0.09725581, 0.013104323, 0.07357148, -0.020104313, -0.014956488, -0.017257847, -0.020743687, -0.046340823, -0.021527996, 0.057039287, -0.051751148, -0.00595411, 0.011733857, -0.04644382, -0.028774152, 0.038308877, -0.015685631, 0.0038190065, -0.094677314, 0.07005245, -0.003068884, 0.050274804, -0.018143218, 0.012056174, 0.019058047, -0.00077958487, 0.030408988, 0.0885491, -0.11106459, -0.019910613, 0.01465938, 0.032499526, 0.04720623, 0.03163276, -0.079508044, 0.07914293, 0.03724754, 0.05636608, -0.016979787, -0.04298359, -0.03599786, 0.058342796, -0.024069536, -0.03200436, 0.015390179, 0.07293075, -0.0013783299, -0.01605161, -0.0045498423, -0.016551308, 0.060823392, 0.073548146, -0.021239666, -0.036749583, 0.00028047478, -0.025989566, -0.05310693, -0.009845653, -0.012862101, 0.058108855, 0.06915682, 0.021099294, 0.001225616, 0.033261415, 0.042154703, 0.05271609, -0.030613305, 0.041209485, 0.0019353209, -0.0019135632, 0.080911145, 0.011060149, 0.05281461, -0.10160427, 0.053647887, 0.01762615, -0.018661015, 0.02777136, -0.056023918, 0.057687696, 0.06513923, -0.069180146, -0.015231091, 0.03774808, 0.012945786, 0.090585396, 0.019942591, -0.015280875, -0.0011742035, -0.042135417, 0.05812486, 0.05519544, -0.06453465, -0.04014237, -0.03199121, 0.009241696, 0.043912023, 0.015467731, 0.0020673021, 0.08763925, -0.08974939, -0.05304043, 0.016309343, -0.04766073, -0.0046682972, -0.040477246, 0.012679025, 0.005960806, -0.03256039, -0.07089416, -0.02648642, -0.062463485, 0.08295411, -0.037147924, -0.074104264, 0.077417135, -0.042383663, 0.002088579, 0.07709948, 0.06521331, -0.07541816, 0.057679284, -0.0038482754, 0.055191133, 0.058614884, -0.018541405, -0.012277692, 0.057926673, -0.01724738, 0.020869015, 0.046103075, -0.0319926, -0.0671411, 0.02629761, 0.044356663, 0.036788594, 0.028035736, 0.06419986, 0.045972086, -0.044160895, 0.09784713, 0.00953585, -0.06252615, 0.025597766, 0.029688764, 0.027506752, -0.055384982, -0.028262418, -0.057812758, 0.042470966, -0.05840525, -0.03801629, 0.0043816785, -0.015086851, 0.022297874, 0.054110903, 0.07420415, -0.040949743, -0.08912868, -0.060081407, -0.046966024, -0.04826231, -0.031198893, 0.06643161, 0.01347482, 0.029003717, 0.047974125, 0.07580259, 0.0364837, 0.012980756, 0.020622224, -0.022555852, 0.10519882, -0.03425076, 0.03889103, -0.007944982, 0.060116176, 0.038143042, -0.043681793, 0.05316621, 0.0016697546, -0.0033659195, 0.020053076, -0.07204762, 0.009732797, 0.03862544, 0.03913928, -0.009832126, 0.06401315, 0.044209804, -0.051490918, 0.014780334, -0.025438532, -0.01395564, -0.038089562, -0.009803314, -0.04146325, 0.03357636, -0.009009651, 0.04373462, -0.05627207, -0.072068065, -0.007331119, -0.04238925, -0.021102922, -0.021610938, -0.063095644, -0.05075978, -0.07491732, 0.0113026835, 0.04940704, 0.084163934, -0.01636119, -0.06292533, -0.014526007, -0.007826649, 0.07212185, 0.004734863, -0.062791124, -0.016170232, -0.016590146, -0.024280416, -0.019522576, 0.01579864, 0.002749153, 0.053687476, -0.016495354, 0.03662209, -0.018870195, 0.039446633, 0.04715818, 0.013310755, 0.028033575, 0.067203104, -0.005826697, 0.042239364, -0.020745477, 0.0015561507, 0.065384425, 0.09041862, 0.01788624, -0.010026493, 0.0639752, -0.0041079777, -0.058741663, 0.034099422, 0.016963305, -0.0052649197, -0.07403116, -0.0029912698, -0.07583906, 0.001012409, -0.029492352, -0.04166984, -0.048218843, -0.06306306, -0.0033243645, -0.02919451, 0.0039520795, -0.037993237, 0.044352133, 0.03976749, -0.030565975, -0.076377496, -0.06569797, 0.01630497, 0.017201763, 0.028935125, 0.004058029, -0.09946857, 0.036038112, -0.06792709, 0.04493338, 0.035801385, -0.048764315, -0.06326099, 0.037968885, 0.038012274, 0.038041856, 0.04288072, 0.01531972, 0.032477308, 0.043926656, -0.0077148937, 0.056322563, -0.03451439, -0.0083661955, 0.0015379508, -0.007879496, 0.01986026, -0.019533899, 0.0405012, 0.015047856, 0.04601962, 0.080275685, 0.017424034, -0.032671392, 0.024088044, -0.021807125, 0.010775311, 0.094901696, 0.0048406925, 0.013086048, 0.04339756, -0.0069915624, 0.019183818, 0.0624931, 0.019509323, 0.07727781, 0.071851335, 0.046544127, 0.040363774, -0.027118236, 0.06800823, -0.01851149, 0.039025713, -0.037301723, 0.05617681, 0.027737545, -0.0011841523, 0.034742635, 0.006083848, 0.033872508, 0.012025738, -0.02354928, -0.07461171, 0.0027702893, 0.04646551, 0.06590462, -0.00794524, -0.011096932, 0.031695057, -0.06732352, -0.051879242, -0.0773121, -0.000517982, 0.08113213, -0.015312499, 0.018544769, -0.023654874, -0.01689197, 0.026425209, -0.08191027, 0.03139842, -0.011997609, 0.059896134, 0.07505033, -0.012907369, 0.008597082, 0.007715897, -0.07062183, -0.027084265, 0.0028182073, 0.03769887, 0.034299187, 0.046780333, -0.007847023, -0.051446356, 0.007982996, -0.034917314, -0.0038174198, -0.05954771, -0.044208106, 0.04685703, -0.0199229, -0.0032713648, 0.009684984, -0.050678924, 0.007356914, -0.06628045, 0.042982273, 0.0055478252, 0.011330174, -0.082057334, 0.026437566, -0.015942575, 0.048285805, -0.003856138, 0.04399534, 0.01741405, -0.059217025, 0.056499016, -0.03459506, 0.030366927, 0.016147505, -0.021027595, -0.013333387, -0.035330992, 0.0445699, -0.03483558, 0.02072434, -0.019552084, -0.0043943045, -0.03957101, 0.0041682394, 0.006047565, 0.03504845, 0.04675005, -0.021805461, -0.0033183587, -0.0017508261, 0.033419013, 0.008266579, 0.067113, -0.026226636, -0.020189233, 0.029219048, 0.031028047, 0.021648621, -0.055164326, -0.008505359, 0.05173594, 0.016450783, -0.017234024, -0.10492493, -0.04954522, 0.024168914, -0.008840458, -0.078473605, -0.042714797, -0.040692057, -0.05446264, 0.0148880705, 0.057658363, 0.005458192, 0.02171352, -0.04556389, 0.017333247, -0.10342444, -0.06159851, -0.03170678, 0.08064648, 0.024460033, -0.07185376, -0.0019515441, -0.026248276, 0.034460787, 0.08695437, 0.06363327, 0.012909266, 0.00093975884, 0.03682474, -0.041370448, -0.0070990156, 0.058603138, -0.038166087, -0.039693672, 0.025385896, 0.0035452761, -0.015794974, 0.019059189, -0.028707229, 0.038948998, -0.032039847, -0.07992934, -0.05482927, 0.048767164, -0.03186542, 0.059099294, 0.063702375, 0.01810526, -0.019284561, 0.036313917, 0.0006970895, 0.020730797, 0.08630282, -0.10650717, 0.0017196184, 0.023258938, -0.021214833, 0.015206377, -0.027243242, -0.021319263, -0.054438062, 0.066603355, -0.047786396, 0.018822387, -0.031346995, -0.0049103773, -0.020732613, -0.0841506, 0.00707288, -0.0033278253, 0.068160556, -0.011127404, 0.05533654, 0.0046188673, 0.039132893, 0.008633137, -0.057081457, -0.030337824, -0.0721918}
		assert.Equal(t, IgnoredFace, e.Kind())
	})
	t.Run("Regular", func(t *testing.T) {
		e := Embedding{-0.037731018, -0.005501065, 0.04339579, 0.050818004, -0.059338734, 0.033849984, -0.006599584, -0.0017643301, 0.049746443, -0.103716515, 0.037138782, -0.0064612515, 0.071909964, 0.013218528, -0.065359734, 0.11057091, 0.031195551, 0.025612833, 0.0075477255, -0.034973715, -0.013490629, -0.08104751, -0.022038054, -0.05304818, 0.008366317, -0.056096837, -0.008484318, 0.049539477, 0.019540254, 0.067417614, -0.027856546, -0.008532138, -0.017063588, -0.00016265438, -0.106199585, 0.03904082, 0.030587498, 0.043008707, -0.015111545, -0.022849092, 0.0025588698, -0.012814152, 0.037556626, -0.0086288145, 0.05265788, 0.011832273, 0.00015048613, -0.0081366515, 0.0013409692, 0.028389124, 0.022627315, -0.015008434, -0.0007749727, 0.013927345, -0.012275729, -0.0090859635, 0.019502806, -0.011900984, 0.016286656, 0.08094661, 0.000306613, -0.06327904, 0.018552454, 0.08885108, -0.07583091, 0.09275318, -0.018484656, 0.074180886, -0.039385945, -0.08063905, -0.05360434, -0.037074074, 0.09909196, 0.025063906, -0.009406389, -0.029612983, -0.018644262, 0.08433939, -0.04466277, -0.07118042, -0.0053266245, -0.07471344, 0.06739151, -0.05399609, 0.03125197, -0.00007781149, -0.04214992, -0.044316035, 0.025013437, 0.031466946, 0.0023496088, 0.042693187, -0.046198968, 0.026152546, -0.017578958, 0.023763098, 0.027511515, -0.05229892, -0.005204117, 0.035853546, -0.031919815, -0.027175877, -0.033706605, 0.018576957, -0.0010251165, -0.006808904, 0.009910016, -0.046926413, -0.02833718, 0.0132687995, -0.033933964, 0.06434295, 0.046245363, 0.044698197, 0.041076522, 0.04224362, -0.050834127, 0.0037004466, 0.061506275, -0.018232772, 0.067569405, 0.048701495, 0.042266034, -0.11045008, 0.03627151, -0.07259142, -0.0027725939, 0.040572345, 0.010365194, -0.018683784, 0.004533848, 0.037213936, -0.050944775, 0.07134523, 0.004012727, 0.036228556, -0.013853831, -0.06910639, -0.011394227, -0.012075533, 0.036311198, -0.02587341, -0.04086224, -0.024498813, -0.019423751, -0.022674281, 0.052483488, 0.026303312, -0.051178075, 0.008410645, 0.039851066, -0.028721321, -0.027934253, -0.029567441, 0.054549955, 0.07423011, -0.07211806, 0.015979288, 0.002092099, 0.049062036, 0.025120452, 0.045975365, 0.025024865, -0.04019101, 0.0013054911, -0.0049644294, 0.0065203104, -0.03237452, -0.020704443, 0.028736785, -0.027353559, 0.07551169, 0.0842262, 0.019992182, 0.11138123, -0.028617613, 0.06700691, -0.048681036, -0.008201593, -0.058066163, 0.027867565, 0.07693089, -0.033642102, -0.05855467, -0.08575646, -0.019721355, 0.018443357, -0.0037373751, 0.032450553, -0.0074002664, -0.028135147, 0.046631414, 0.0192969, -0.0071076434, -0.004898368, 0.011896125, -0.026020564, 0.074016415, -0.033884488, -0.07919758, 0.021606326, -0.0142197255, 0.0807476, 0.03722956, -0.0015949347, 0.008076167, -0.009640628, 0.02341143, 0.015375526, -0.059428506, 0.051759534, 0.028049389, 0.07790443, 0.0478649, 0.09191913, -0.055882096, -0.026637457, 0.01236174, -0.0033003334, 0.008522798, 0.027216703, -0.033221588, -0.028086975, -0.11505473, -0.044336796, 0.013873659, 0.03982099, 0.060988583, -0.07439005, 0.01333661, -0.004818605, 0.02561305, -0.059055943, 0.0081638545, -0.032278564, 0.046092775, 0.025316834, -0.046857174, -0.0341012, 0.04379944, -0.029710777, 0.09238533, 0.009769442, 0.018552538, -0.02632421, 0.033739865, -0.022547472, 0.016400741, -0.05336998, -0.012623122, -0.08303054, -0.010368709, 0.01690871, 0.0014627968, -0.050720602, 0.038742293, -0.065664165, -0.10676187, -0.013403239, 0.075702645, -0.055623896, -0.03871971, -0.042371742, 0.03794916, -0.0590573, -0.002583715, -0.029995736, -0.08144537, -0.043295015, -0.034286328, -0.026538746, 0.01953962, 0.08203153, 0.036415525, 0.045531306, 0.004713152, 0.026550433, -0.0055336948, -0.031087596, -0.01923592, -0.1047651, 0.051826596, -0.009522955, 0.0023846119, -0.030824797, 0.0011774554, 0.03384506, 0.010090165, -0.033521466, -0.052155476, 0.0032979914, -0.004305921, -0.08622774, 0.03262125, 0.06332183, 0.00067599304, 0.01989574, 0.04406689, 0.019945903, -0.003796719, 0.00025200442, -0.010055775, 0.04070448, -0.004082432, -0.026942603, 0.110138796, -0.029453337, 0.015611174, 0.08778206, -0.027199872, -0.014513782, 0.021546016, 0.01706933, -0.01365763, 0.026393317, -0.029974515, 0.0050973813, 0.00732006, 0.034644503, 0.03125295, -0.01563078, -0.041023903, -0.04566191, -0.00013489528, 0.04253813, 0.045907266, -0.011943533, 0.031480506, -0.0034109016, -0.035025172, 0.028193155, -0.06832476, -0.0019371725, -0.049427234, -0.0061696135, 0.051213425, 0.07832765, -0.01894849, 0.0290217, 0.031639505, -0.045830216, -0.048976466, 0.052241277, -0.026111973, 0.037248738, -0.07693719, -0.00020981894, 0.030037824, -0.041687537, -0.015251262, 0.041234106, 0.031005232, 0.024838371, 0.0020733695, -0.038252156, -0.026375879, 0.03495583, 0.018539391, -0.07203285, 0.006305707, -0.004792029, -0.05153865, 0.0072443904, -0.017075827, 0.013596034, -0.0054885144, -0.052320853, -0.033805914, -0.038080305, -0.010182737, 0.012953395, 0.014565793, -0.023107765, 0.030313661, 0.011124675, 0.018100796, 0.1074551, -0.074430406, -0.04017658, -0.002058053, -0.07340946, 0.0033503077, 0.04565434, -0.033483636, -0.029218825, -0.05245377, -0.059680052, 0.017752757, -0.05493096, -0.10746678, 0.08623605, 0.014577705, 0.0044184765, -0.025559181, -0.015846781, -0.006661373, 0.09459266, 0.036481388, 0.030402042, -0.0152169075, 0.0037343376, 0.024195764, -0.01859682, -0.0022416788, 0.0056786016, -0.06771737, 0.02364697, 0.021247962, 0.05002757, 0.083975114, 0.011197936, 0.0035017033, -0.0014220127, -0.024415374, 0.023921741, -0.0108229555, -0.06622103, -0.00024976654, 0.06549428, -0.004968772, -0.011665843, 0.03409593, 0.028397659, -0.086434126, -0.074232705, 0.041721817, -0.034767248, -0.014432104, 0.006313255, 0.04040112, -0.0050085387, -0.0023618732, -0.02225774, 0.02383989, 0.061036374, 0.058602326, 0.04343989, -0.029145751, 0.0369256, -0.054843802, -0.017078603, 0.047091234, 0.050245833, -0.04615808, -0.02404996, 0.02584908, -0.006215116, -0.016719814, 0.052097827, 0.01908364, -0.07564805, -0.11024787, -0.036854018, -0.0056766514, -0.007618422, 0.034403287, 0.056957226, -0.03565076, -0.0365251, 0.040833052, 0.008173664, -0.04300709, 0.0028465139, -0.020792698, 0.020321466, -0.002447697, 0.019681728, -0.08843341, -0.042670425, 0.014576458, 0.009701015, -0.12435015, -0.025056241, 0.03084893, -0.031128377, 0.006784327, 0.052201632, 0.06773422, 0.015289244, 0.009421969, 0.0725144, -0.07110377, -0.05183192, -0.008816121, -0.11178569, 0.079700254, -0.0110752955, 0.0046521816, -0.07299747, 0.10732809, -0.06012486, 0.057736155, -0.02227576, -0.063017495, 0.085292354, 0.037407015, -0.07368719, 0.033426613, 0.062104296, -0.016089993, -0.023178348, -0.064638525, 0.028132388, -0.049967688, 0.053581465, 0.031400185, 0.0712773, -0.012665878, 0.0760322, 0.030081542, -0.022147592, 0.009422989}
		assert.Equal(t, RegularFace, e.Kind())
	})
}

func TestEmbedding_Ignored(t *testing.T) {
	t.Run("Blur1", func(t *testing.T) {
		e := Embedding{-0.00067741907, -0.0473858, -0.055704225, 0.066581585, 0.005290037, 0.03822874, -0.05082791, 0.049087, 0.018308854, -0.01478969, -0.0017964382, 0.057903986, -0.02245441, -0.033446193, -0.0071987803, -0.03150515, 0.017724376, 0.019948162, 0.056362633, -0.11701946, -0.09725581, 0.013104323, 0.07357148, -0.020104313, -0.014956488, -0.017257847, -0.020743687, -0.046340823, -0.021527996, 0.057039287, -0.051751148, -0.00595411, 0.011733857, -0.04644382, -0.028774152, 0.038308877, -0.015685631, 0.0038190065, -0.094677314, 0.07005245, -0.003068884, 0.050274804, -0.018143218, 0.012056174, 0.019058047, -0.00077958487, 0.030408988, 0.0885491, -0.11106459, -0.019910613, 0.01465938, 0.032499526, 0.04720623, 0.03163276, -0.079508044, 0.07914293, 0.03724754, 0.05636608, -0.016979787, -0.04298359, -0.03599786, 0.058342796, -0.024069536, -0.03200436, 0.015390179, 0.07293075, -0.0013783299, -0.01605161, -0.0045498423, -0.016551308, 0.060823392, 0.073548146, -0.021239666, -0.036749583, 0.00028047478, -0.025989566, -0.05310693, -0.009845653, -0.012862101, 0.058108855, 0.06915682, 0.021099294, 0.001225616, 0.033261415, 0.042154703, 0.05271609, -0.030613305, 0.041209485, 0.0019353209, -0.0019135632, 0.080911145, 0.011060149, 0.05281461, -0.10160427, 0.053647887, 0.01762615, -0.018661015, 0.02777136, -0.056023918, 0.057687696, 0.06513923, -0.069180146, -0.015231091, 0.03774808, 0.012945786, 0.090585396, 0.019942591, -0.015280875, -0.0011742035, -0.042135417, 0.05812486, 0.05519544, -0.06453465, -0.04014237, -0.03199121, 0.009241696, 0.043912023, 0.015467731, 0.0020673021, 0.08763925, -0.08974939, -0.05304043, 0.016309343, -0.04766073, -0.0046682972, -0.040477246, 0.012679025, 0.005960806, -0.03256039, -0.07089416, -0.02648642, -0.062463485, 0.08295411, -0.037147924, -0.074104264, 0.077417135, -0.042383663, 0.002088579, 0.07709948, 0.06521331, -0.07541816, 0.057679284, -0.0038482754, 0.055191133, 0.058614884, -0.018541405, -0.012277692, 0.057926673, -0.01724738, 0.020869015, 0.046103075, -0.0319926, -0.0671411, 0.02629761, 0.044356663, 0.036788594, 0.028035736, 0.06419986, 0.045972086, -0.044160895, 0.09784713, 0.00953585, -0.06252615, 0.025597766, 0.029688764, 0.027506752, -0.055384982, -0.028262418, -0.057812758, 0.042470966, -0.05840525, -0.03801629, 0.0043816785, -0.015086851, 0.022297874, 0.054110903, 0.07420415, -0.040949743, -0.08912868, -0.060081407, -0.046966024, -0.04826231, -0.031198893, 0.06643161, 0.01347482, 0.029003717, 0.047974125, 0.07580259, 0.0364837, 0.012980756, 0.020622224, -0.022555852, 0.10519882, -0.03425076, 0.03889103, -0.007944982, 0.060116176, 0.038143042, -0.043681793, 0.05316621, 0.0016697546, -0.0033659195, 0.020053076, -0.07204762, 0.009732797, 0.03862544, 0.03913928, -0.009832126, 0.06401315, 0.044209804, -0.051490918, 0.014780334, -0.025438532, -0.01395564, -0.038089562, -0.009803314, -0.04146325, 0.03357636, -0.009009651, 0.04373462, -0.05627207, -0.072068065, -0.007331119, -0.04238925, -0.021102922, -0.021610938, -0.063095644, -0.05075978, -0.07491732, 0.0113026835, 0.04940704, 0.084163934, -0.01636119, -0.06292533, -0.014526007, -0.007826649, 0.07212185, 0.004734863, -0.062791124, -0.016170232, -0.016590146, -0.024280416, -0.019522576, 0.01579864, 0.002749153, 0.053687476, -0.016495354, 0.03662209, -0.018870195, 0.039446633, 0.04715818, 0.013310755, 0.028033575, 0.067203104, -0.005826697, 0.042239364, -0.020745477, 0.0015561507, 0.065384425, 0.09041862, 0.01788624, -0.010026493, 0.0639752, -0.0041079777, -0.058741663, 0.034099422, 0.016963305, -0.0052649197, -0.07403116, -0.0029912698, -0.07583906, 0.001012409, -0.029492352, -0.04166984, -0.048218843, -0.06306306, -0.0033243645, -0.02919451, 0.0039520795, -0.037993237, 0.044352133, 0.03976749, -0.030565975, -0.076377496, -0.06569797, 0.01630497, 0.017201763, 0.028935125, 0.004058029, -0.09946857, 0.036038112, -0.06792709, 0.04493338, 0.035801385, -0.048764315, -0.06326099, 0.037968885, 0.038012274, 0.038041856, 0.04288072, 0.01531972, 0.032477308, 0.043926656, -0.0077148937, 0.056322563, -0.03451439, -0.0083661955, 0.0015379508, -0.007879496, 0.01986026, -0.019533899, 0.0405012, 0.015047856, 0.04601962, 0.080275685, 0.017424034, -0.032671392, 0.024088044, -0.021807125, 0.010775311, 0.094901696, 0.0048406925, 0.013086048, 0.04339756, -0.0069915624, 0.019183818, 0.0624931, 0.019509323, 0.07727781, 0.071851335, 0.046544127, 0.040363774, -0.027118236, 0.06800823, -0.01851149, 0.039025713, -0.037301723, 0.05617681, 0.027737545, -0.0011841523, 0.034742635, 0.006083848, 0.033872508, 0.012025738, -0.02354928, -0.07461171, 0.0027702893, 0.04646551, 0.06590462, -0.00794524, -0.011096932, 0.031695057, -0.06732352, -0.051879242, -0.0773121, -0.000517982, 0.08113213, -0.015312499, 0.018544769, -0.023654874, -0.01689197, 0.026425209, -0.08191027, 0.03139842, -0.011997609, 0.059896134, 0.07505033, -0.012907369, 0.008597082, 0.007715897, -0.07062183, -0.027084265, 0.0028182073, 0.03769887, 0.034299187, 0.046780333, -0.007847023, -0.051446356, 0.007982996, -0.034917314, -0.0038174198, -0.05954771, -0.044208106, 0.04685703, -0.0199229, -0.0032713648, 0.009684984, -0.050678924, 0.007356914, -0.06628045, 0.042982273, 0.0055478252, 0.011330174, -0.082057334, 0.026437566, -0.015942575, 0.048285805, -0.003856138, 0.04399534, 0.01741405, -0.059217025, 0.056499016, -0.03459506, 0.030366927, 0.016147505, -0.021027595, -0.013333387, -0.035330992, 0.0445699, -0.03483558, 0.02072434, -0.019552084, -0.0043943045, -0.03957101, 0.0041682394, 0.006047565, 0.03504845, 0.04675005, -0.021805461, -0.0033183587, -0.0017508261, 0.033419013, 0.008266579, 0.067113, -0.026226636, -0.020189233, 0.029219048, 0.031028047, 0.021648621, -0.055164326, -0.008505359, 0.05173594, 0.016450783, -0.017234024, -0.10492493, -0.04954522, 0.024168914, -0.008840458, -0.078473605, -0.042714797, -0.040692057, -0.05446264, 0.0148880705, 0.057658363, 0.005458192, 0.02171352, -0.04556389, 0.017333247, -0.10342444, -0.06159851, -0.03170678, 0.08064648, 0.024460033, -0.07185376, -0.0019515441, -0.026248276, 0.034460787, 0.08695437, 0.06363327, 0.012909266, 0.00093975884, 0.03682474, -0.041370448, -0.0070990156, 0.058603138, -0.038166087, -0.039693672, 0.025385896, 0.0035452761, -0.015794974, 0.019059189, -0.028707229, 0.038948998, -0.032039847, -0.07992934, -0.05482927, 0.048767164, -0.03186542, 0.059099294, 0.063702375, 0.01810526, -0.019284561, 0.036313917, 0.0006970895, 0.020730797, 0.08630282, -0.10650717, 0.0017196184, 0.023258938, -0.021214833, 0.015206377, -0.027243242, -0.021319263, -0.054438062, 0.066603355, -0.047786396, 0.018822387, -0.031346995, -0.0049103773, -0.020732613, -0.0841506, 0.00707288, -0.0033278253, 0.068160556, -0.011127404, 0.05533654, 0.0046188673, 0.039132893, 0.008633137, -0.057081457, -0.030337824, -0.0721918}
		t.Logf("Blur1 magnitude: %f", e.Magnitude())
		t.Logf("Blur1 ignored dist: %f", IgnoredEmbeddings.Dist(e))
		assert.True(t, e.Ignored())
	})
	t.Run("Blur2", func(t *testing.T) {
		e := Embedding{-0.040659550577402115, -0.03220542520284653, 0.05863650515675545, 0.07900159806013107, -0.03954162076115608, -0.03830844908952713, -0.09981349855661392, -0.03843552619218826, 0.021984204649925232, 0.021209893748164177, 0.05058338865637779, 0.026279529556632042, -0.037386082112789154, 0.019860034808516502, 0.01779518648982048, 0.029238300397992134, 0.025665590539574623, 0.053838297724723816, 0.01769574172794819, 0.04497014731168747, -0.0034581704530864954, 0.05082075297832489, 0.00983431376516819, -0.055299241095781326, -0.08863261342048645, 0.026919297873973846, -0.003238844918087125, 0.06171567738056183, -0.006652790121734142, 0.03024955280125141, -0.07668674737215042, 0.02599654719233513, 0.03656956925988197, -0.040286894887685776, -0.07485620677471161, 0.007622404955327511, 0.004450628533959389, 0.022175054997205734, 0.024441875517368317, 0.02038322575390339, -0.008045016787946224, 0.02700800821185112, 0.037923432886600494, 0.037730343639850616, 0.0019298223778605461, -0.025241704657673836, 0.07439867407083511, 0.025373654440045357, -0.062184471637010574, 0.019462162628769875, 0.011163688264787197, 0.05711067467927933, -0.007787591777741909, 0.006090524140745401, -0.01247440930455923, -0.0002892761258408427, -0.022054091095924377, 0.09874352067708969, 0.02230732887983322, -0.03625740855932236, 0.01047681737691164, 0.023006660863757133, -0.03572215884923935, -0.047631122171878815, -0.004130185581743717, 0.13868559896945953, 0.004021449480205774, 0.0056119272485375404, -0.03055204637348652, 0.03540297970175743, 0.08558189123868942, 0.04478949308395386, 0.08267980813980103, 0.0001782427862053737, -0.09348706901073456, 0.01561333891004324, -0.012885896489024162, 0.01995423436164856, -0.06154691055417061, -0.021583547815680504, 0.07658854871988297, 0.03818646818399429, 0.019400358200073242, 0.048004768788814545, 0.03896840661764145, 0.007684631273150444, 0.006036552134901285, 0.061359286308288574, -0.06359504908323288, 0.06033588945865631, 0.003095539752393961, 0.01086103729903698, 0.024172229692339897, 0.035893380641937256, -0.015560186468064785, 0.0011388470884412527, 0.01351285818964243, 0.05575203895568848, -0.006037220358848572, -0.04045598953962326, 0.001389052253216505, -0.02900969795882702, -0.044179223477840424, -0.012978514656424522, 0.036748431622982025, 0.009548956528306007, 0.12157998234033585, -0.027398979291319847, -0.028363993391394615, 0.03085082396864891, -0.03142939507961273, -0.033452536910772324, -0.062204647809267044, 0.03741671144962311, -0.037081167101860046, 0.005499409511685371, 0.042599402368068695, 0.026988882571458817, 0.037901923060417175, 0.026043692603707314, -0.02773086354136467, -0.07317446917295456, 0.000101863632153254, 0.01806195266544819, -0.03163762018084526, -0.049250949174165726, 0.017383672297000885, 0.06737986952066422, -0.018057355657219887, -0.03998659923672676, 0.005807057488709688, -0.028374463319778442, 0.026576239615678787, -0.01071916613727808, -0.05852247774600983, 0.01768427900969982, -0.04401516914367676, 0.0035484740510582924, 0.01177794486284256, 0.029788490384817123, 0.0022414580453187227, 0.012311144731938839, 0.014886411838233471, 0.060596615076065063, -0.00679460633546114, -0.01986791379749775, 0.017852429300546646, -0.03839694708585739, -0.010994594544172287, 0.0516304187476635, 0.06284306943416595, -0.009843732230365276, -0.033825311809778214, 0.010088239796459675, 0.002782990923151374, -0.007669741753488779, 0.0036510066129267216, -0.0347248837351799, -0.034374918788671494, -0.015334841795265675, 0.06460481137037277, -0.01482471451163292, -0.022562984377145767, 0.0660383328795433, 0.039143770933151245, -0.04959432780742645, -0.04688224941492081, -0.08884536474943161, 0.035801686346530914, -0.011035206727683544, -0.048159871250391006, -0.012846723198890686, -0.08550407737493515, -0.02462676912546158, -0.05736429616808891, -0.023693742230534554, 0.06937230378389359, 0.008348439820110798, 0.046880267560482025, -0.007452292367815971, -0.026880638673901558, -0.02645084448158741, -0.008707266300916672, 0.039963752031326294, -0.039603643119335175, 0.015119479969143867, -0.001705334521830082, 0.07568509131669998, 0.007083678152412176, 0.03451305627822876, 0.08042848855257034, 0.01654256135225296, -0.027564499527215958, 0.09245218336582184, 0.07642299681901932, 0.049259401857852936, -0.043418038636446, 0.02720213122665882, -0.051213305443525314, 0.10580828785896301, 0.04973253980278969, 0.027844952419400215, -0.06973676383495331, -0.002782640513032675, -0.05002935230731964, 0.03786781430244446, 0.012268701568245888, 0.03857699781656265, -0.03049379587173462, -0.02773997187614441, 0.0324966236948967, 0.007138446904718876, 0.045148178935050964, 0.03304283693432808, -0.08195831626653671, -0.0658479630947113, -0.03167840093374252, 0.0785706415772438, -0.0540161207318306, 0.08956210315227509, -0.01385448407381773, -0.03099009394645691, 0.018756408244371414, -0.06490232050418854, -0.017304886132478714, 0.024655258283019066, -0.02960297279059887, 0.01074492558836937, -0.01565052568912506, 0.04490678757429123, 0.056525640189647675, -0.06037742644548416, -0.00036496517714112997, -0.015667423605918884, -0.0717754065990448, 0.01312245149165392, 0.04692285135388374, 0.009900979697704315, -0.06392915546894073, 0.0317864790558815, 0.015916356816887856, 0.02110808528959751, 0.039608780294656754, 0.09377234429121017, -0.05484704673290253, 0.05391034856438637, -0.0788193866610527, 0.10010083019733429, 0.011118135415017605, -0.00004653222640627064, -0.04172910004854202, -0.02035870961844921, -0.030938807874917984, 0.003754222998395562, -0.04063389077782631, 0.11299732327461243, -0.02142464555799961, -0.008394543081521988, 0.08152930438518524, -0.0008909814641810954, -0.05258719623088837, -0.05761850252747536, 0.009006860665977001, 0.06501699984073639, -0.01597391627728939, 0.08522436022758484, 0.03371994569897652, -0.045805223286151886, 0.032167356461286545, 0.08392851054668427, -0.016528621315956116, -0.06503161042928696, 0.019590284675359726, 0.03115348517894745, 0.03043849766254425, 0.014987046830356121, -0.055867355316877365, -0.0032457816414535046, -0.015822168439626694, -0.005734337959438562, 0.0071865590289235115, -0.015463619492948055, -0.025871464982628822, -0.07001885026693344, 0.024963589385151863, 0.01097678393125534, -0.035117257386446, 0.03467186540365219, 0.06086552515625954, -0.03848052769899368, 0.07273925840854645, -0.004646539222449064, -0.001109645119868219, -0.005088613834232092, -0.0974913015961647, -0.08384663611650467, 0.025186428800225258, -0.0006411857320927083, 0.030254928395152092, 0.006322708446532488, -0.0502672903239727, 0.02300260402262211, 0.030662409961223602, 0.018212566152215004, 0.06359684467315674, -0.009071605280041695, -0.015119871124625206, 0.040699902921915054, -0.03850189968943596, -0.05171874910593033, 0.10410609096288681, 0.10507630556821823, -0.02125021629035473, -0.009639402851462364, 0.012288953177630901, 0.008919070474803448, -0.024553585797548294, 0.014904174953699112, 0.023295167833566666, 0.05103684216737747, -0.00450109550729394, 0.002307947026565671, 0.014376292005181313, 0.11136122792959213, 0.0014088694006204605, 0.0022693064529448748, 0.05170426890254021, 0.04981289431452751, 0.07373254001140594, 0.049386415630578995, -0.014806983061134815, -0.05833027511835098, -0.03190769627690315, -0.008523926138877869, 0.04702630639076233, 0.029194114729762077, 0.004517692141234875, -0.09024124592542648, 0.003329969011247158, -0.08030996471643448, 0.019111910834908485, 0.09198802709579468, -0.0310179702937603, -0.018719222396612167, -0.02182493731379509, 0.017477037385106087, -0.038689568638801575, 0.011723000556230545, 0.041695673018693924, 0.057853586971759796, 0.06979171931743622, 0.00011747673124773428, -0.03506821393966675, 0.05103304982185364, -0.028120825067162514, -0.005008046515285969, -0.02852008491754532, 0.046975843608379364, 0.031390246003866196, 0.07648137956857681, -0.04007460176944733, 0.05367399379611015, -0.007463269867002964, -0.008238906040787697, 0.016662007197737694, -0.027663614600896835, 0.01993817463517189, -0.04393567517399788, -0.031136782839894295, -0.05139624699950218, -0.07834076136350632, -0.042914580553770065, -0.019670458510518074, 0.03316812217235565, 0.09591887146234512, 0.06848528981208801, -0.02773074246942997, 0.02855822816491127, -0.018690742552280426, 0.011006012558937073, 0.054826073348522186, -0.009247495792806149, 0.003375179599970579, 0.04311295971274376, 0.03586158901453018, 0.0018443106673657894, 0.009209017269313335, -0.023508505895733833, 0.005245110485702753, -0.03597981482744217, 0.00041601891280151904, -0.05553282052278519, 0.010633128695189953, -0.12370350956916809, 0.03224118798971176, 0.005466188304126263, -0.016138294711709023, -0.048258986324071884, -0.046113520860672, 0.0055899592116475105, 0.014022012241184711, -0.023494740948081017, 0.002998130861669779, -0.03219323977828026, -0.007386348210275173, -0.025029350072145462, 0.02161424607038498, -0.02605803869664669, 0.03477400168776512, -0.02827581763267517, 0.015608449466526508, -0.06077265739440918, 0.1015695258975029, 0.05589430034160614, 0.019551506265997887, 0.08917868137359619, -0.017507141456007957, 0.07259833812713623, -0.0648856982588768, 0.006342224311083555, 0.03585096821188927, 0.0037353287916630507, 0.04381411895155907, 0.004948670044541359, -0.05632920190691948, -0.05978763476014137, -0.024755241349339485, 0.020523933693766594, 0.0029942821711301804, -0.016245706006884575, 0.0073024132288992405, -0.012954101897776127, 0.014015593566000462, 0.011097325012087822, -0.0729522556066513, 0.07186494767665863, -0.0016607641009613872, 0.0026961045805364847, -0.005763839930295944, -0.026096666231751442, 0.02687499113380909, 0.04582877829670906, -0.0176797304302454, 0.015226836316287518, -0.025522204115986824, 0.005290484055876732, 0.018956126645207405, 0.005492339376360178, -0.05386399105191231, 0.040570177137851715, -0.003739845473319292, 0.10603580623865128, 0.004780937451869249, 0.011396643705666065, 0.036971934139728546, -0.041815534234046936, 0.02744169346988201, -0.004168000537902117, 0.0145946703851223, 0.03126026317477226, 0.01925659365952015, -0.09751059114933014, -0.006547612603753805, -0.03389118239283562, 0.05320596322417259, 0.01183426845818758, -0.06129913404583931, 0.02740320935845375, 0.017650293186306953, 0.03780294209718704, -0.00009194338781526312, 0.0404474213719368, 0.07070805132389069, -0.0999426394701004, -0.03244980424642563, -0.06469535827636719, 0.02357516996562481, 0.013541318476200104, -0.010025718249380589, 0.07540664821863174, 0.0028972753789275885, -0.008960247039794922, -0.012603504583239555, 0.05121699348092079, 0.020327046513557434, 0.03936949744820595, 0.001988647971302271, 0.03354545310139656, 0.024581555277109146, -0.015217097476124763, 0.02889206074178219, 0.02085159160196781, -0.06294527649879456, 0.022404003888368607, -0.034289367496967316, -0.0674518421292305, 0.07663356512784958, 0.010276293382048607, -0.018306201323866844, -0.05057809129357338, -0.09850548207759857, 0.09915852546691895, -0.08300632983446121, 0.10919290035963058, -0.04569940268993378, -0.03762957453727722, 0.0034436392597854137, -0.0632016733288765, -0.0400751493871212, 0.07686466723680496, 0.05905047059059143, 0.004703994374722242}
		t.Logf("Blur2 magnitude: %f", e.Magnitude())
		t.Logf("Blur2 ignored dist: %f", IgnoredEmbeddings.Dist(e))
		assert.True(t, e.Ignored())
	})
}

func TestEmbedding_CanMatch(t *testing.T) {
	t.Run("Noise", func(t *testing.T) {
		e := Embedding{-0.00067741907, -0.0473858, -0.055704225, 0.066581585, 0.005290037, 0.03822874, -0.05082791, 0.049087, 0.018308854, -0.01478969, -0.0017964382, 0.057903986, -0.02245441, -0.033446193, -0.0071987803, -0.03150515, 0.017724376, 0.019948162, 0.056362633, -0.11701946, -0.09725581, 0.013104323, 0.07357148, -0.020104313, -0.014956488, -0.017257847, -0.020743687, -0.046340823, -0.021527996, 0.057039287, -0.051751148, -0.00595411, 0.011733857, -0.04644382, -0.028774152, 0.038308877, -0.015685631, 0.0038190065, -0.094677314, 0.07005245, -0.003068884, 0.050274804, -0.018143218, 0.012056174, 0.019058047, -0.00077958487, 0.030408988, 0.0885491, -0.11106459, -0.019910613, 0.01465938, 0.032499526, 0.04720623, 0.03163276, -0.079508044, 0.07914293, 0.03724754, 0.05636608, -0.016979787, -0.04298359, -0.03599786, 0.058342796, -0.024069536, -0.03200436, 0.015390179, 0.07293075, -0.0013783299, -0.01605161, -0.0045498423, -0.016551308, 0.060823392, 0.073548146, -0.021239666, -0.036749583, 0.00028047478, -0.025989566, -0.05310693, -0.009845653, -0.012862101, 0.058108855, 0.06915682, 0.021099294, 0.001225616, 0.033261415, 0.042154703, 0.05271609, -0.030613305, 0.041209485, 0.0019353209, -0.0019135632, 0.080911145, 0.011060149, 0.05281461, -0.10160427, 0.053647887, 0.01762615, -0.018661015, 0.02777136, -0.056023918, 0.057687696, 0.06513923, -0.069180146, -0.015231091, 0.03774808, 0.012945786, 0.090585396, 0.019942591, -0.015280875, -0.0011742035, -0.042135417, 0.05812486, 0.05519544, -0.06453465, -0.04014237, -0.03199121, 0.009241696, 0.043912023, 0.015467731, 0.0020673021, 0.08763925, -0.08974939, -0.05304043, 0.016309343, -0.04766073, -0.0046682972, -0.040477246, 0.012679025, 0.005960806, -0.03256039, -0.07089416, -0.02648642, -0.062463485, 0.08295411, -0.037147924, -0.074104264, 0.077417135, -0.042383663, 0.002088579, 0.07709948, 0.06521331, -0.07541816, 0.057679284, -0.0038482754, 0.055191133, 0.058614884, -0.018541405, -0.012277692, 0.057926673, -0.01724738, 0.020869015, 0.046103075, -0.0319926, -0.0671411, 0.02629761, 0.044356663, 0.036788594, 0.028035736, 0.06419986, 0.045972086, -0.044160895, 0.09784713, 0.00953585, -0.06252615, 0.025597766, 0.029688764, 0.027506752, -0.055384982, -0.028262418, -0.057812758, 0.042470966, -0.05840525, -0.03801629, 0.0043816785, -0.015086851, 0.022297874, 0.054110903, 0.07420415, -0.040949743, -0.08912868, -0.060081407, -0.046966024, -0.04826231, -0.031198893, 0.06643161, 0.01347482, 0.029003717, 0.047974125, 0.07580259, 0.0364837, 0.012980756, 0.020622224, -0.022555852, 0.10519882, -0.03425076, 0.03889103, -0.007944982, 0.060116176, 0.038143042, -0.043681793, 0.05316621, 0.0016697546, -0.0033659195, 0.020053076, -0.07204762, 0.009732797, 0.03862544, 0.03913928, -0.009832126, 0.06401315, 0.044209804, -0.051490918, 0.014780334, -0.025438532, -0.01395564, -0.038089562, -0.009803314, -0.04146325, 0.03357636, -0.009009651, 0.04373462, -0.05627207, -0.072068065, -0.007331119, -0.04238925, -0.021102922, -0.021610938, -0.063095644, -0.05075978, -0.07491732, 0.0113026835, 0.04940704, 0.084163934, -0.01636119, -0.06292533, -0.014526007, -0.007826649, 0.07212185, 0.004734863, -0.062791124, -0.016170232, -0.016590146, -0.024280416, -0.019522576, 0.01579864, 0.002749153, 0.053687476, -0.016495354, 0.03662209, -0.018870195, 0.039446633, 0.04715818, 0.013310755, 0.028033575, 0.067203104, -0.005826697, 0.042239364, -0.020745477, 0.0015561507, 0.065384425, 0.09041862, 0.01788624, -0.010026493, 0.0639752, -0.0041079777, -0.058741663, 0.034099422, 0.016963305, -0.0052649197, -0.07403116, -0.0029912698, -0.07583906, 0.001012409, -0.029492352, -0.04166984, -0.048218843, -0.06306306, -0.0033243645, -0.02919451, 0.0039520795, -0.037993237, 0.044352133, 0.03976749, -0.030565975, -0.076377496, -0.06569797, 0.01630497, 0.017201763, 0.028935125, 0.004058029, -0.09946857, 0.036038112, -0.06792709, 0.04493338, 0.035801385, -0.048764315, -0.06326099, 0.037968885, 0.038012274, 0.038041856, 0.04288072, 0.01531972, 0.032477308, 0.043926656, -0.0077148937, 0.056322563, -0.03451439, -0.0083661955, 0.0015379508, -0.007879496, 0.01986026, -0.019533899, 0.0405012, 0.015047856, 0.04601962, 0.080275685, 0.017424034, -0.032671392, 0.024088044, -0.021807125, 0.010775311, 0.094901696, 0.0048406925, 0.013086048, 0.04339756, -0.0069915624, 0.019183818, 0.0624931, 0.019509323, 0.07727781, 0.071851335, 0.046544127, 0.040363774, -0.027118236, 0.06800823, -0.01851149, 0.039025713, -0.037301723, 0.05617681, 0.027737545, -0.0011841523, 0.034742635, 0.006083848, 0.033872508, 0.012025738, -0.02354928, -0.07461171, 0.0027702893, 0.04646551, 0.06590462, -0.00794524, -0.011096932, 0.031695057, -0.06732352, -0.051879242, -0.0773121, -0.000517982, 0.08113213, -0.015312499, 0.018544769, -0.023654874, -0.01689197, 0.026425209, -0.08191027, 0.03139842, -0.011997609, 0.059896134, 0.07505033, -0.012907369, 0.008597082, 0.007715897, -0.07062183, -0.027084265, 0.0028182073, 0.03769887, 0.034299187, 0.046780333, -0.007847023, -0.051446356, 0.007982996, -0.034917314, -0.0038174198, -0.05954771, -0.044208106, 0.04685703, -0.0199229, -0.0032713648, 0.009684984, -0.050678924, 0.007356914, -0.06628045, 0.042982273, 0.0055478252, 0.011330174, -0.082057334, 0.026437566, -0.015942575, 0.048285805, -0.003856138, 0.04399534, 0.01741405, -0.059217025, 0.056499016, -0.03459506, 0.030366927, 0.016147505, -0.021027595, -0.013333387, -0.035330992, 0.0445699, -0.03483558, 0.02072434, -0.019552084, -0.0043943045, -0.03957101, 0.0041682394, 0.006047565, 0.03504845, 0.04675005, -0.021805461, -0.0033183587, -0.0017508261, 0.033419013, 0.008266579, 0.067113, -0.026226636, -0.020189233, 0.029219048, 0.031028047, 0.021648621, -0.055164326, -0.008505359, 0.05173594, 0.016450783, -0.017234024, -0.10492493, -0.04954522, 0.024168914, -0.008840458, -0.078473605, -0.042714797, -0.040692057, -0.05446264, 0.0148880705, 0.057658363, 0.005458192, 0.02171352, -0.04556389, 0.017333247, -0.10342444, -0.06159851, -0.03170678, 0.08064648, 0.024460033, -0.07185376, -0.0019515441, -0.026248276, 0.034460787, 0.08695437, 0.06363327, 0.012909266, 0.00093975884, 0.03682474, -0.041370448, -0.0070990156, 0.058603138, -0.038166087, -0.039693672, 0.025385896, 0.0035452761, -0.015794974, 0.019059189, -0.028707229, 0.038948998, -0.032039847, -0.07992934, -0.05482927, 0.048767164, -0.03186542, 0.059099294, 0.063702375, 0.01810526, -0.019284561, 0.036313917, 0.0006970895, 0.020730797, 0.08630282, -0.10650717, 0.0017196184, 0.023258938, -0.021214833, 0.015206377, -0.027243242, -0.021319263, -0.054438062, 0.066603355, -0.047786396, 0.018822387, -0.031346995, -0.0049103773, -0.020732613, -0.0841506, 0.00707288, -0.0033278253, 0.068160556, -0.011127404, 0.05533654, 0.0046188673, 0.039132893, 0.008633137, -0.057081457, -0.030337824, -0.0721918}

		assert.False(t, e.CanMatch())
	})
	t.Run("RealPerson1", func(t *testing.T) {
		e := Embedding{-0.037731018, -0.005501065, 0.04339579, 0.050818004, -0.059338734, 0.033849984, -0.006599584, -0.0017643301, 0.049746443, -0.103716515, 0.037138782, -0.0064612515, 0.071909964, 0.013218528, -0.065359734, 0.11057091, 0.031195551, 0.025612833, 0.0075477255, -0.034973715, -0.013490629, -0.08104751, -0.022038054, -0.05304818, 0.008366317, -0.056096837, -0.008484318, 0.049539477, 0.019540254, 0.067417614, -0.027856546, -0.008532138, -0.017063588, -0.00016265438, -0.106199585, 0.03904082, 0.030587498, 0.043008707, -0.015111545, -0.022849092, 0.0025588698, -0.012814152, 0.037556626, -0.0086288145, 0.05265788, 0.011832273, 0.00015048613, -0.0081366515, 0.0013409692, 0.028389124, 0.022627315, -0.015008434, -0.0007749727, 0.013927345, -0.012275729, -0.0090859635, 0.019502806, -0.011900984, 0.016286656, 0.08094661, 0.000306613, -0.06327904, 0.018552454, 0.08885108, -0.07583091, 0.09275318, -0.018484656, 0.074180886, -0.039385945, -0.08063905, -0.05360434, -0.037074074, 0.09909196, 0.025063906, -0.009406389, -0.029612983, -0.018644262, 0.08433939, -0.04466277, -0.07118042, -0.0053266245, -0.07471344, 0.06739151, -0.05399609, 0.03125197, -0.00007781149, -0.04214992, -0.044316035, 0.025013437, 0.031466946, 0.0023496088, 0.042693187, -0.046198968, 0.026152546, -0.017578958, 0.023763098, 0.027511515, -0.05229892, -0.005204117, 0.035853546, -0.031919815, -0.027175877, -0.033706605, 0.018576957, -0.0010251165, -0.006808904, 0.009910016, -0.046926413, -0.02833718, 0.0132687995, -0.033933964, 0.06434295, 0.046245363, 0.044698197, 0.041076522, 0.04224362, -0.050834127, 0.0037004466, 0.061506275, -0.018232772, 0.067569405, 0.048701495, 0.042266034, -0.11045008, 0.03627151, -0.07259142, -0.0027725939, 0.040572345, 0.010365194, -0.018683784, 0.004533848, 0.037213936, -0.050944775, 0.07134523, 0.004012727, 0.036228556, -0.013853831, -0.06910639, -0.011394227, -0.012075533, 0.036311198, -0.02587341, -0.04086224, -0.024498813, -0.019423751, -0.022674281, 0.052483488, 0.026303312, -0.051178075, 0.008410645, 0.039851066, -0.028721321, -0.027934253, -0.029567441, 0.054549955, 0.07423011, -0.07211806, 0.015979288, 0.002092099, 0.049062036, 0.025120452, 0.045975365, 0.025024865, -0.04019101, 0.0013054911, -0.0049644294, 0.0065203104, -0.03237452, -0.020704443, 0.028736785, -0.027353559, 0.07551169, 0.0842262, 0.019992182, 0.11138123, -0.028617613, 0.06700691, -0.048681036, -0.008201593, -0.058066163, 0.027867565, 0.07693089, -0.033642102, -0.05855467, -0.08575646, -0.019721355, 0.018443357, -0.0037373751, 0.032450553, -0.0074002664, -0.028135147, 0.046631414, 0.0192969, -0.0071076434, -0.004898368, 0.011896125, -0.026020564, 0.074016415, -0.033884488, -0.07919758, 0.021606326, -0.0142197255, 0.0807476, 0.03722956, -0.0015949347, 0.008076167, -0.009640628, 0.02341143, 0.015375526, -0.059428506, 0.051759534, 0.028049389, 0.07790443, 0.0478649, 0.09191913, -0.055882096, -0.026637457, 0.01236174, -0.0033003334, 0.008522798, 0.027216703, -0.033221588, -0.028086975, -0.11505473, -0.044336796, 0.013873659, 0.03982099, 0.060988583, -0.07439005, 0.01333661, -0.004818605, 0.02561305, -0.059055943, 0.0081638545, -0.032278564, 0.046092775, 0.025316834, -0.046857174, -0.0341012, 0.04379944, -0.029710777, 0.09238533, 0.009769442, 0.018552538, -0.02632421, 0.033739865, -0.022547472, 0.016400741, -0.05336998, -0.012623122, -0.08303054, -0.010368709, 0.01690871, 0.0014627968, -0.050720602, 0.038742293, -0.065664165, -0.10676187, -0.013403239, 0.075702645, -0.055623896, -0.03871971, -0.042371742, 0.03794916, -0.0590573, -0.002583715, -0.029995736, -0.08144537, -0.043295015, -0.034286328, -0.026538746, 0.01953962, 0.08203153, 0.036415525, 0.045531306, 0.004713152, 0.026550433, -0.0055336948, -0.031087596, -0.01923592, -0.1047651, 0.051826596, -0.009522955, 0.0023846119, -0.030824797, 0.0011774554, 0.03384506, 0.010090165, -0.033521466, -0.052155476, 0.0032979914, -0.004305921, -0.08622774, 0.03262125, 0.06332183, 0.00067599304, 0.01989574, 0.04406689, 0.019945903, -0.003796719, 0.00025200442, -0.010055775, 0.04070448, -0.004082432, -0.026942603, 0.110138796, -0.029453337, 0.015611174, 0.08778206, -0.027199872, -0.014513782, 0.021546016, 0.01706933, -0.01365763, 0.026393317, -0.029974515, 0.0050973813, 0.00732006, 0.034644503, 0.03125295, -0.01563078, -0.041023903, -0.04566191, -0.00013489528, 0.04253813, 0.045907266, -0.011943533, 0.031480506, -0.0034109016, -0.035025172, 0.028193155, -0.06832476, -0.0019371725, -0.049427234, -0.0061696135, 0.051213425, 0.07832765, -0.01894849, 0.0290217, 0.031639505, -0.045830216, -0.048976466, 0.052241277, -0.026111973, 0.037248738, -0.07693719, -0.00020981894, 0.030037824, -0.041687537, -0.015251262, 0.041234106, 0.031005232, 0.024838371, 0.0020733695, -0.038252156, -0.026375879, 0.03495583, 0.018539391, -0.07203285, 0.006305707, -0.004792029, -0.05153865, 0.0072443904, -0.017075827, 0.013596034, -0.0054885144, -0.052320853, -0.033805914, -0.038080305, -0.010182737, 0.012953395, 0.014565793, -0.023107765, 0.030313661, 0.011124675, 0.018100796, 0.1074551, -0.074430406, -0.04017658, -0.002058053, -0.07340946, 0.0033503077, 0.04565434, -0.033483636, -0.029218825, -0.05245377, -0.059680052, 0.017752757, -0.05493096, -0.10746678, 0.08623605, 0.014577705, 0.0044184765, -0.025559181, -0.015846781, -0.006661373, 0.09459266, 0.036481388, 0.030402042, -0.0152169075, 0.0037343376, 0.024195764, -0.01859682, -0.0022416788, 0.0056786016, -0.06771737, 0.02364697, 0.021247962, 0.05002757, 0.083975114, 0.011197936, 0.0035017033, -0.0014220127, -0.024415374, 0.023921741, -0.0108229555, -0.06622103, -0.00024976654, 0.06549428, -0.004968772, -0.011665843, 0.03409593, 0.028397659, -0.086434126, -0.074232705, 0.041721817, -0.034767248, -0.014432104, 0.006313255, 0.04040112, -0.0050085387, -0.0023618732, -0.02225774, 0.02383989, 0.061036374, 0.058602326, 0.04343989, -0.029145751, 0.0369256, -0.054843802, -0.017078603, 0.047091234, 0.050245833, -0.04615808, -0.02404996, 0.02584908, -0.006215116, -0.016719814, 0.052097827, 0.01908364, -0.07564805, -0.11024787, -0.036854018, -0.0056766514, -0.007618422, 0.034403287, 0.056957226, -0.03565076, -0.0365251, 0.040833052, 0.008173664, -0.04300709, 0.0028465139, -0.020792698, 0.020321466, -0.002447697, 0.019681728, -0.08843341, -0.042670425, 0.014576458, 0.009701015, -0.12435015, -0.025056241, 0.03084893, -0.031128377, 0.006784327, 0.052201632, 0.06773422, 0.015289244, 0.009421969, 0.0725144, -0.07110377, -0.05183192, -0.008816121, -0.11178569, 0.079700254, -0.0110752955, 0.0046521816, -0.07299747, 0.10732809, -0.06012486, 0.057736155, -0.02227576, -0.063017495, 0.085292354, 0.037407015, -0.07368719, 0.033426613, 0.062104296, -0.016089993, -0.023178348, -0.064638525, 0.028132388, -0.049967688, 0.053581465, 0.031400185, 0.0712773, -0.012665878, 0.0760322, 0.030081542, -0.022147592, 0.009422989}

		assert.True(t, e.CanMatch())
	})
	t.Run("RealPerson2", func(t *testing.T) {
		e := Embedding{0.05743743, 0.06322246, 0.04731233, -0.01582013, -0.014022472, 0.028749773, -0.079572044, 0.010417165, 0.012425559, -0.013655686, -0.05018789, 0.026249807, 0.037449032, 0.051438555, -0.055292394, 0.018136416, 0.035481997, 0.021924775, 0.0449153, -0.046709806, 0.025960712, -0.063309774, 0.037570722, 0.0053055496, 0.07164356, -0.058082405, 0.0017537506, 0.05310737, 0.008366767, 0.001858572, -0.0444527, -0.04880738, -0.033274952, -0.08379612, -0.018964237, -0.0029277618, -0.021386296, 0.0375952, -0.034034044, -0.060141306, -0.0727236, 0.05060482, -0.082235344, 0.04422095, 0.074947104, 0.020209799, 0.0017703519, -0.015411033, 0.012017898, 0.02179871, -0.013231191, -0.08483583, 0.0057485234, -0.019012775, -0.04857383, 0.084329374, 0.009039854, 0.040807534, -0.01692938, 0.0017201875, 0.036594935, -0.08844029, -0.00285713, 0.054565318, -0.047155175, 0.017556412, 0.009818504, 0.113506615, -0.009222306, -0.0004704829, -0.0005908021, 0.023356704, 0.015126567, 0.035651624, 0.025497274, -0.10676789, -0.06828348, 0.112095155, 0.08150907, 0.0007053766, -0.008199173, -0.03852071, 0.029535439, -0.030568745, -0.08978221, -0.004848515, -0.03737906, 0.036448833, 0.004548617, 0.08181337, -0.0087715015, 0.02876368, -0.0060202847, -0.013462866, -0.05015226, -0.03569624, 0.049505115, 0.011994855, -0.010969182, -0.0038046215, -0.004821639, 0.01422656, -0.05946822, -0.013812223, 0.039755587, 0.034921456, -0.05158028, -0.0008751564, -0.031674784, -0.002480392, 0.013109971, -0.017252844, 0.064675435, 0.07642624, 0.08362122, 0.030908048, 0.067052245, 0.021291262, 0.01784629, -0.0507172, 0.052007917, 0.04663132, 0.0064223176, -0.027726524, 0.08033194, 0.038676508, 0.018382965, 0.048913725, -0.022436062, 0.0056725373, -0.040102404, 0.037674494, -0.022307452, -0.03098931, 0.0577183, -0.022725038, -0.0055031423, 0.045162845, -0.014300147, -0.018093627, -0.040114313, -0.051383376, -0.030573318, -0.101557806, -0.008447289, 0.014637746, 0.050047614, -0.011550598, 0.027773034, -0.03317795, -0.048737925, -0.02800452, -0.016925864, -0.037572905, 0.025179392, 0.031473313, -0.010588548, -0.0119464, 0.0057186596, 0.049826983, -0.026282294, -0.00095309806, 0.04696705, -0.0444816, -0.04687481, -0.05711774, 0.07398202, -0.0066416007, -0.016446855, 0.051111717, -0.0419391, -0.013271554, 0.043318115, 0.0012680996, 0.037176434, -0.021031545, 0.03968714, 0.048614495, -0.0058204047, -0.010237752, 0.07029732, 0.018752169, -0.0616816, 0.008854898, 0.06205655, -0.009874518, -0.050585378, 0.012557405, 0.01626891, 0.017797807, -0.03568621, -0.007182635, 0.015247179, 0.02795279, 0.009831571, 0.045041207, -0.055870973, -0.025731718, 0.01907759, -0.034226514, 0.029678043, -0.021697098, -0.020734878, 0.057307053, -0.008900531, -0.019598745, -0.03082626, 0.014591779, 0.06420119, -0.059627317, -0.03732171, 0.016718497, -0.0027331563, 0.013793794, 0.06873449, 0.031878877, -0.025323479, 0.017207827, -0.00025769856, 0.01302832, -0.033877812, 0.1036087, -0.031368185, -0.0062403507, -0.020410763, 0.064998895, -0.049161144, 0.075556606, -0.005309279, 0.024778325, -0.055955246, -0.053952686, 0.04611469, -0.040877238, 0.0366899, 0.05907716, -0.023292458, -0.081198305, 0.078474045, 0.050623402, -0.06233864, 0.07453958, 0.0152983265, -0.04816594, 0.023196025, -0.03438517, -0.024680838, -0.04664079, 0.054698855, 0.0038191404, 0.0024043208, 0.0034349218, -0.03711057, 0.001107596, -0.0028691792, 0.00030419108, 0.037632354, 0.060571946, -0.0946064, 0.042204216, -0.037838906, 0.021439435, -0.076814726, 0.06236704, 0.012242562, -0.061841127, 0.016115433, -0.063648604, 0.025584254, 0.10527214, -0.079565875, 0.008840051, 0.06655628, -0.0051484755, -0.08278825, -0.023478502, 0.0713399, -0.018204115, 0.048147563, -0.12774643, -0.014040633, 0.052833144, 0.0025820592, 0.029898077, 0.09640923, 0.08246072, 0.02947083, -0.015254255, -0.05879318, -0.08034651, -0.03984985, -0.008921548, 0.0035848247, 0.01210673, 0.01669468, -0.011540037, 0.043646365, 0.12930681, 0.028525097, -0.033249676, 0.009854595, 0.020683004, -0.03317388, 0.030189851, -0.037221596, 0.056988247, 0.028217647, -0.09884985, 0.010463105, 0.052619364, -0.025229864, -0.0095943725, -0.0152116455, 0.050259188, 0.04650281, -0.07481224, -0.024553102, -0.00060233194, -0.054850005, 0.024833087, 0.029229235, -0.041785177, -0.07714764, -0.013403594, 0.030718219, 0.015469627, -0.0074155433, -0.02679301, 0.009519983, -0.059538018, -0.008628714, -0.0067284205, 0.010197514, -0.06606767, -0.005759551, -0.0022303548, -0.0028307706, 0.014501192, 0.025007654, 0.02578938, -0.0378708, 0.045471873, 0.046895593, 0.064339206, -0.028388325, 0.060857113, -0.020218765, 0.031644333, 0.0052066315, 0.019141829, 0.056266394, 0.009460299, -0.024507342, -0.007147454, -0.08706694, -0.040379945, 0.044624608, 0.0354123, -0.019891156, -0.07543022, 0.04300264, -0.057571575, -0.008736315, 0.027166944, -0.02620351, -0.06503468, 0.04547514, -0.06995108, 0.023360554, 0.0067407857, -0.07763636, 0.04539317, 0.022868318, -0.010696204, 0.096428476, -0.0098833935, 0.010394665, -0.053308632, -0.07989839, 0.0047803717, -0.008077739, -0.002149282, 0.03329656, 0.031331684, -0.041785568, -0.047738556, -0.06495552, 0.020175837, -0.03115513, -0.06061734, -0.002706623, -0.010334317, 0.00423277, 0.012610406, -0.035930026, 0.016086096, 0.0995368, -0.022022268, 0.0145803625, 0.055138133, -0.05336383, 0.064680666, -0.009677598, -0.054862097, 0.055777773, -0.06849751, -0.022308815, 0.04459878, 0.05018248, 0.07288731, 0.009007135, 0.09244995, -0.120825015, 0.06114768, 0.06042321, -0.007861768, -0.010927538, 0.04720156, 0.04455385, -0.03482649, -0.026552528, 0.043172978, 0.01093146, -0.015799692, 0.002202651, 0.010309535, 0.005310587, -0.11890363, -0.0795878, -0.0003631139, -0.027302552, -0.015855208, -0.018209826, -0.022755314, -0.013153738, 0.04345833, 0.03354373, 0.0105263805, 0.06194301, -0.032513645, 0.096333094, 0.005829615, 0.03347289, -0.07679508, -0.045443438, 0.030386887, -0.05020792, 0.0033663346, 0.05774469, -0.027640222, 0.044374026, 0.00033217962, -0.030820126, 0.05522514, 0.013675768, 0.0069077997, 0.04126497, 0.03151114, 0.02491263, -0.067820564, -0.0103627015, -0.07824549, -0.05266336, 0.013888292, 0.040954925, 0.034307495, -0.06418129, 0.0039767474, 0.024156764, 0.014469209, -0.0018970015, -0.07990409, 0.028226675, -0.026945848, -0.02464125, -0.050481487, 0.05450125, -0.025523432, -0.015445301, 0.0060901823, 0.012443802, 0.04673962, -0.018540293, -0.016265117, -0.031241901, 0.009048211, 0.054158207, -0.048130896, 0.09530002, 0.0099937515, -0.03540203, 0.025122656, -0.0856811, -0.06332409, 0.0068043796, 0.020160854, -0.06262762, 0.038287282, -0.06531139, 0.0063432995, 0.00087177445, -0.007837982, 0.050352592, -0.05995185, 0.063116044, 0.017331842, -0.0021170392, 0.0011423155, -0.023920225, -0.050662033, -0.015922869, -0.028740764}

		assert.True(t, e.CanMatch())
	})
}

func TestEmbedding_SkipMatching(t *testing.T) {
	t.Run("True", func(t *testing.T) {
		e := Embedding{-0.00959064718335867, 0.03787063807249069, -0.0030881548300385475, 0.02789853885769844, 0.017454572021961212, 0.0396987721323967, -0.03091704286634922, 0.005318029318004847, 0.021617550402879715, -0.08214963972568512, -0.003952134400606155, 0.0269720908254385, 0.048880551010370255, -0.03537372127175331, -0.042236171662807465, 0.021553633734583855, 0.03937383368611336, 0.01815507560968399, 0.08373168110847473, -0.11838400363922119, -0.038254253566265106, -0.04993032291531563, 0.07148619741201401, 0.006384310312569141, 0.05344310402870178, -0.027579499408602715, 0.021648988127708435, -0.07013172656297684, -0.06400937587022781, 0.10622639954090118, -0.01507984846830368, -0.02844894863665104, -0.013048898428678513, -0.03571505844593048, -0.022063886746764183, 0.022826166823506355, 0.01703103445470333, 0.00679031852632761, -0.09583312273025513, 0.03446732088923454, -0.045221585780382156, 0.03292521834373474, -0.012820744886994362, 0.06122862547636032, 0.01973198726773262, -0.013975882902741432, 0.027514882385730743, 0.12478502094745636, -0.09630053490400314, -0.008597812615334988, -0.019534612074494362, 0.03927983343601227, 0.04311678186058998, 0.025297729298472404, -0.035719674080610275, 0.05421024188399315, 0.07541341334581375, 0.040334682911634445, -0.0632546916604042, -0.004164006095379591, 0.027950556948781013, 0.017827920615673065, 0.02774866297841072, -0.025094853714108467, 0.00012262807285878807, 0.04165732488036156, -0.03155842795968056, 0.03801475837826729, 0.0031508952379226685, -0.011753040365874767, 0.06262513995170593, 0.05895991623401642, -0.02384188584983349, -0.025149181485176086, -0.016906173899769783, -0.03138834610581398, -0.06759334355592728, 0.018074069172143936, 0.028748946264386177, 0.03350280225276947, 0.001738330232910812, -0.035873714834451675, 0.0050230612978339195, -0.005394259933382273, -0.035111431032419205, 0.005703517701476812, -0.060869812965393066, 0.044046416878700256, 0.05451945215463638, -0.0012109529925510287, 0.04929054155945778, 0.03312966600060463, -0.02503111958503723, -0.0699458047747612, 0.09152142703533173, -0.035196661949157715, -0.02000804804265499, 0.003603762947022915, -0.0549810416996479, 0.041149843484163284, 0.019640415906906128, -0.06913350522518158, -0.08494774252176285, 0.047828249633312225, 0.011485084891319275, 0.11441357433795929, 0.012079037725925446, 0.026444999501109123, 0.008605830371379852, -0.014796323142945766, 0.042191699147224426, 0.0360623262822628, -0.01067506056278944, -0.02117612026631832, -0.0003311904729343951, 0.020912105217576027, 0.02051572874188423, 0.04119933396577835, 0.011461400426924229, 0.02468070574104786, -0.030830683186650276, -0.024522947147488594, 0.07760800421237946, -0.044838037341833115, 0.007875975221395493, 0.03662760183215141, -0.031315844506025314, 0.028968002647161484, -0.007360775955021381, -0.052097514271736145, 0.004892056342214346, 0.0051552411168813705, 0.058972474187612534, -0.05307154729962349, -0.02330617979168892, 0.0560041144490242, -0.06173492223024368, 0.00004632262425730005, 0.007912986911833286, 0.0031768144108355045, -0.08211413770914078, -0.02641596458852291, -0.07240095734596252, -0.04998013749718666, 0.016048355028033257, -0.023686233907938004, 0.08416120707988739, 0.002466161735355854, 0.0017551603959873319, 0.000651281327009201, 0.018105899915099144, -0.05974912270903587, -0.03980677202343941, 0.019075721502304077, 0.0014616637490689754, 0.06682229787111282, 0.02257758192718029, 0.04021807014942169, 0.09144134074449539, 0.020396307110786438, 0.055604636669158936, 0.026022544130682945, -0.03050902672111988, 0.011569516733288765, -0.014519683085381985, 0.0038184933364391327, -0.03115340694785118, 0.029596896842122078, -0.055038318037986755, -0.005584381986409426, -0.015937503427267075, -0.01591162569820881, 0.034234486520290375, 0.010233158245682716, 0.0364360548555851, 0.02957785315811634, 0.038372594863176346, -0.04782934859395027, -0.03462134674191475, -0.0432763509452343, -0.041607096791267395, 0.019871780648827553, -0.026665959507226944, 0.046689242124557495, 0.020541366189718246, 0.03362491726875305, 0.04561452195048332, 0.12613892555236816, 0.02306310087442398, 0.0048497817479074, -0.027223020792007446, -0.0762500986456871, 0.06465625762939453, -0.020680397748947144, -0.02472679689526558, -0.0469549298286438, 0.05494922026991844, 0.011157477274537086, -0.05097919702529907, 0.05126889795064926, 0.03758222982287407, -0.06554574519395828, 0.00288044149056077, 0.014015591703355312, 0.013589163310825825, 0.03634551167488098, 0.0031862170435488224, -0.03541851416230202, -0.011984468437731266, -0.04591989517211914, -0.04950973764061928, 0.014266318641602993, 0.014613134786486626, 0.004269343335181475, 0.0013365329941734672, -0.010044350288808346, 0.025745976716279984, 0.029322613030672073, 0.08641400188207626, 0.00042273724102415144, -0.1199660375714302, -0.11129316687583923, -0.03984867036342621, -0.05681384354829788, 0.009998883120715618, 0.030147377401590347, -0.0286977831274271, -0.0003513149276841432, -0.08627857267856598, -0.023915421217679977, 0.025925707072019577, 0.08490575850009918, 0.031879108399152756, -0.0023629055358469486, 0.0480312779545784, 0.0021763548720628023, 0.020024623721837997, -0.01996619999408722, -0.001396739506162703, -0.026282500475645065, -0.040633674710989, -0.019956767559051514, 0.004316484089940786, -0.031683146953582764, 0.06379353255033493, 0.03608919307589531, 0.008245682343840599, 0.02868475206196308, -0.0009207205730490386, -0.0003780983679462224, 0.02880168706178665, -0.04014896973967552, 0.017292466014623642, 0.049382057040929794, -0.015038374811410904, 0.024192562326788902, 0.03517518192529678, 0.019119804725050926, 0.021942559629678726, 0.07587131857872009, 0.0005678452434949577, -0.04390380531549454, 0.030292486771941185, 0.042298778891563416, -0.06521622836589813, 0.02252770960330963, -0.00466647045686841, -0.024906277656555176, -0.026186272501945496, 0.07858474552631378, -0.05505937710404396, -0.0008577461121603847, 0.00968341063708067, -0.036743391305208206, -0.08478125929832458, -0.025725962594151497, 0.07145383208990097, 0.029407603666186333, -0.0001950680452864617, -0.1292036920785904, 0.02494245208799839, -0.008491290733218193, 0.050918228924274445, -0.011559431441128254, -0.04706485942006111, -0.013783150352537632, 0.009277299977838993, -0.07522283494472504, -0.036186907440423965, -0.06634241342544556, 0.010219116695225239, -0.08408123254776001, -0.014987781643867493, 0.010251465253531933, -0.01592072658240795, -0.035617098212242126, 0.020554568618535995, 0.05061344802379608, 0.0494505874812603, 0.02590356394648552, 0.01528799906373024, -0.00029076842474751174, 0.02353300340473652, 0.0015167297096922994, 0.05400843173265457, 0.04550565034151077, -0.04259566590189934, -0.0060416329652071, -0.00677477428689599, 0.05933074653148651, -0.005193949677050114, 0.014253835193812847, 0.042284123599529266, 0.06695422530174255, 0.04029611125588417, 0.015430709347128868, -0.06947603821754456, 0.0339425727725029, -0.06005615368485451, 0.01404648832976818, 0.06008269265294075, -0.011060234159231186, -0.04977267608046532, 0.05691606178879738, -0.013345426879823208, 0.10078923404216766, 0.08031554520130157, 0.0425117127597332, 0.09008562564849854, 0.04609135910868645, 0.06102297827601433, 0.022890515625476837, -0.03089219331741333, 0.0332498624920845, -0.031279049813747406, -0.009156256914138794, 0.027170570567250252, 0.04901871085166931, 0.07207565009593964, 0.04074881598353386, -0.027857864275574684, -0.025717025622725487, 0.032386474311351776, 0.036552079021930695, -0.055537834763526917, -0.0229702889919281, 0.03349658474326134, 0.03683074936270714, 0.015133108012378216, -0.0632123202085495, -0.030310358852148056, 0.09408748149871826, 0.011012745089828968, -0.10027626156806946, -0.056098587810993195, 0.007266550324857235, 0.09435073286294937, -0.005252359434962273, 0.0414881557226181, -0.07797796279191971, 0.0054626669734716415, -0.027152489870786667, -0.06476820260286331, -0.04554128646850586, -0.020997364073991776, 0.03704288229346275, -0.0041465735994279385, -0.08224689960479736, 0.019587524235248566, 0.05182863399386406, -0.09750733524560928, 0.012806789949536324, 0.014560981653630733, -0.012063717469573021, 0.10477723181247711, 0.04364655539393425, 0.05573931708931923, -0.08249012380838394, 0.002664536237716675, 0.016965137794613838, 0.016157248988747597, -0.07265286147594452, -0.0025825295597314835, -0.011157424189150333, -0.053293049335479736, 0.01613083854317665, 0.003192639909684658, -0.02518875151872635, 0.025411557406187057, -0.04756153002381325, -0.008369989693164825, 0.0018538516014814377, -0.001305201556533575, 0.006403622217476368, 0.020627789199352264, -0.024054545909166336, 0.05217380076646805, 0.0469573549926281, 0.01885838247835636, 0.020833401009440422, -0.04654202610254288, 0.044648706912994385, -0.004453012719750404, -0.021127738058567047, 0.007881376892328262, -0.04722931608557701, -0.009467313066124916, 0.013864696025848389, 0.014279618859291077, 0.01670973189175129, 0.006757605355232954, 0.03243840113282204, -0.08637244999408722, 0.014409483410418034, 0.014930488541722298, -0.021012697368860245, -0.00746690621599555, 0.04036633297801018, 0.0766197144985199, -0.002925584791228175, -0.037694621831178665, 0.01753336563706398, -0.0129204411059618, 0.058751046657562256, -0.003414733335375786, 0.009327893145382404, 0.006946941372007132, 0.036547087132930756, 0.01600072905421257, 0.027991879731416702, -0.024807672947645187, 0.013996168039739132, -0.024033015593886375, 0.020035816356539726, -0.06689176708459854, -0.021769963204860687, 0.019834108650684357, 0.007396597880870104, -0.03514741361141205, -0.038449011743068695, -0.0027228370308876038, -0.060723625123500824, 0.05235403776168823, 0.005773501005023718, 0.022514579817652702, 0.03794749826192856, -0.06979167461395264, -0.0036482769064605236, -0.011913052760064602, -0.01920865662395954, -0.04111270606517792, 0.05357895419001579, -0.023412834852933884, -0.0893779918551445, -0.02306830696761608, -0.03236269950866699, 0.007966117933392525, 0.10357413440942764, 0.02653438411653042, 0.004998756106942892, -0.015604768879711628, -0.022902334108948708, -0.10633908212184906, 0.03903093561530113, 0.05978463217616081, -0.011735391803085804, -0.06194228678941727, 0.03223072364926338, 0.04556537792086601, 0.007720542140305042, 0.039454445242881775, -0.04189905524253845, -0.004674337804317474, -0.01275805663317442, -0.12497187405824661, -0.07940814644098282, 0.023411696776747704, 0.02147858962416649, -0.03503002971410751, 0.016921473667025566, -0.016184881329536438, -0.045962586998939514, 0.08095240592956543, -0.004070675931870937, -0.05266023054718971, 0.13639050722122192, -0.02151007391512394, 0.006739250384271145, 0.03182916343212128, -0.027000118046998978, -0.0030197608284652233, 0.031326163560152054, -0.10159225016832352, -0.06630226224660873, 0.0699416846036911, 0.01672203093767166, -0.04788779094815254, 0.039929479360580444, 0.027769070118665695, 0.01937052048742771, -0.06442618370056152, -0.06701736897230148, 0.039595261216163635, 0.05279085412621498, 0.007269475143402815, 0.06969842314720154, 0.048928432166576385, 0.0164470374584198, -0.014216633513569832, -0.015720434486865997, -0.007112122140824795, -0.10834096372127533}
		assert.True(t, e.SkipMatching())
	})
	t.Run("False", func(t *testing.T) {
		e := Embedding{0.004882930312305689, -0.028871430084109306, -0.014925234951078892, 0.042015232145786285, 0.03289106860756874, 0.00047218144754879177, -0.04626072198152542, 0.08869951218366623, -0.08738508075475693, 0.041352055966854095, 0.025143291801214218, 0.027804607525467873, 0.03851303085684776, 0.059128664433956146, 0.029246464371681213, -0.01177206914871931, -0.055604543536901474, 0.04581688344478607, -0.021625488996505737, 0.014038625173270702, 0.04526897147297859, -0.003151113400235772, 0.01755913719534874, -0.016582749783992767, -0.04034445434808731, 0.03751881793141365, 0.11246222257614136, 0.025973817333579063, 0.046221256256103516, -0.03560330346226692, 0.010319976136088371, -0.06042899936437607, -0.02092718705534935, -0.015790656208992004, -0.015058585442602634, -0.031521182507276535, -0.014863084070384502, 0.09852202981710434, -0.026713669300079346, -0.09230262786149979, -0.0645485445857048, 0.03376315161585808, -0.016680343076586723, -0.0032860636711120605, 0.0289445947855711, -0.04086116701364517, 0.01185047347098589, -0.03036908246576786, -0.050068069249391556, 0.0013629610184580088, -0.10402216762304306, 0.020886534824967384, 0.06360501796007156, -0.038404129445552826, -0.10402511060237885, 0.019234996289014816, -0.0301763117313385, 0.04926493763923645, -0.014555397443473339, 0.023388627916574478, 0.045102808624506, -0.07065623998641968, 0.01779104769229889, 0.04318133369088173, 0.006222338881343603, -0.03631843626499176, 0.005155006889253855, -0.03126167878508568, 0.02961049973964691, 0.042098451405763626, -0.05473579093813896, -0.030505038797855377, 0.05462753400206566, -0.018857350572943687, -0.013100373558700085, 0.024632159620523453, -0.029910949990153313, -0.06632661819458008, 0.04453831911087036, -0.050670187920331955, 0.037967462092638016, 0.07036780565977097, 0.07603567838668823, 0.02958795428276062, -0.06687693297863007, 0.030427396297454834, 0.040562309324741364, 0.081810861825943, -0.01210289727896452, -0.027030745521187782, -0.08186805993318558, 0.017522599548101425, -0.07442684471607208, 0.032609228044748306, -0.008241117000579834, -0.02420344017446041, 0.010065721347928047, -0.07006815820932388, -0.023965315893292427, -0.095053531229496, -0.0066795386373996735, -0.007384734693914652, 0.017342889681458473, 0.048182494938373566, -0.007601919583976269, -0.034079138189554214, -0.06012185662984848, -0.048203855752944946, -0.00012411877105478197, -0.0702674463391304, -0.053258661180734634, 0.09610331803560257, -0.08409681171178818, 0.0006605522357858717, 0.09284624457359314, -0.003066445467993617, -0.01669788733124733, 0.07133719325065613, -0.001136226230300963, -0.038388170301914215, 0.036363981664180756, -0.03186909109354019, -0.011004592292010784, -0.04703499376773834, -0.033754657953977585, 0.009894444607198238, -0.0651240348815918, 0.07229526340961456, 0.018740307539701462, -0.021803900599479675, 0.012212129309773445, 0.022386791184544563, 0.05509564280509949, -0.002009343821555376, 0.052710991352796555, -0.03911963477730751, 0.0037262304686009884, 0.04576747119426727, -0.06396473199129105, 0.016327453777194023, -0.01841137744486332, 0.08133656531572342, 0.027454890310764313, 0.017934516072273254, -0.05057291314005852, 0.05975693091750145, -0.007352042011916637, 0.00653004040941596, 0.045967090874910355, 0.0636090412735939, -0.04789235070347786, 0.020336657762527466, 0.003387229749932885, -0.036981452256441116, -0.005459815263748169, -0.015007982961833477, -0.046427641063928604, -0.0265751201659441, -0.02166137658059597, -0.04442169517278671, -0.0388776957988739, 0.014315947890281677, 0.07145505398511887, 0.023914091289043427, -0.009579996578395367, 0.000555231177713722, -0.07929696887731552, -0.04671946167945862, 0.04548916965723038, 0.04007089138031006, 0.0777222141623497, -0.05238672345876694, -0.03217660263180733, 0.010117340832948685, -0.07449944317340851, -0.021306153386831284, -0.041546110063791275, 0.004237184766680002, 0.009483197703957558, 0.06297741830348969, -0.000040676473872736096, -0.0072582196444272995, 0.027166014537215233, -0.03531072288751602, 0.04809935390949249, -0.047254230827093124, -0.035896413028240204, 0.001353008090518415, -0.006516282446682453, -0.12176339328289032, 0.003468466456979513, 0.03414403647184372, -0.005717947147786617, -0.013245332054793835, 0.050411250442266464, 0.060794975608587265, -0.033848684281110764, -0.0411624014377594, 0.004714736714959145, 0.07038156688213348, 0.03152059018611908, 0.0032927212305366993, -0.06656128913164139, -0.02337886579334736, -0.06524009257555008, 0.10044806450605392, -0.022327493876218796, -0.011950562708079815, -0.009763725101947784, -0.11933285742998123, 0.008748459629714489, 0.017833517864346504, -0.02984185330569744, 0.06127692759037018, 0.02242015302181244, -0.003635581349954009, -0.019167892634868622, 0.10762561112642288, 0.006600579246878624, 0.015260499902069569, -0.0540555864572525, 0.09029702097177505, -0.033669471740722656, 0.011766647920012474, 0.1104455515742302, 0.01904078759253025, -0.020095430314540863, 0.01835247315466404, -0.0018705067923292518, -0.033028945326805115, -0.048259615898132324, 0.030004244297742844, 0.07956615835428238, -0.0642324686050415, -0.04139978811144829, 0.03843799605965614, 0.06650455296039581, -0.020038694143295288, 0.02672666683793068, -0.04095584899187088, -0.03936886042356491, 0.0063452632166445255, -0.015512409619987011, 0.014523478224873543, -0.018992457538843155, 0.025680938735604286, -0.01937483437359333, -0.021194742992520332, -0.003287843195721507, 0.0517817921936512, -0.04542914032936096, -0.024611888453364372, -0.020536299794912338, 0.07575392723083496, 0.00509954709559679, -0.025987792760133743, -0.006120736710727215, 0.09092006087303162, -0.0213322751224041, -0.060274362564086914, 0.07494226098060608, -0.07354876399040222, -0.04971634969115257, 0.028758447617292404, -0.03872194141149521, -0.05081532895565033, 0.08855368942022324, -0.08159982413053513, 0.06338321417570114, 0.06456979364156723, 0.04353044182062149, 0.005764496512711048, 0.0600232258439064, 0.0014271264662966132, -0.00789173785597086, -0.005119846668094397, -0.011158729903399944, -0.018335465341806412, 0.023802103474736214, 0.013924619182944298, -0.022950127720832825, -0.05804508179426193, -0.03638503700494766, -0.033681925386190414, 0.0033610588870942593, 0.12201116234064102, 0.07830760627985, -0.01918034814298153, 0.034231945872306824, -0.07167097181081772, 0.03948679193854332, -0.028818128630518913, 0.039063021540641785, 0.07101557403802872, -0.0439496748149395, -0.04144040122628212, 0.012664629146456718, 0.030000725761055946, 0.04847702756524086, 0.02541559748351574, 0.07345808297395706, 0.0031921358313411474, 0.038445696234703064, 0.014779598452150822, 0.006091540213674307, -0.03244377300143242, -0.03608289733529091, -0.006579521112143993, -0.10094884037971497, 0.04581669345498085, 0.04587441310286522, 0.020043063908815384, -0.031375154852867126, 0.024461230263113976, 0.020627979189157486, 0.07001999020576477, 0.06002703309059143, -0.005296268034726381, -0.0010267249308526516, 0.004162963014096022, -0.013901745900511742, -0.034833602607250214, -0.054472003132104874, -0.03190429508686066, 0.017492398619651794, -0.008733944967389107, 0.04404545947909355, 0.007761085871607065, 0.07122837752103806, -0.03194647282361984, 0.08522669970989227, -0.041125934571027756, -0.0437992662191391, -0.055396996438503265, 0.008446729741990566, -0.0015191518468782306, -0.004613490775227547, -0.008796783164143562, -0.07657443732023239, -0.025113390758633614, 0.03673252835869789, 0.024203898385167122, 0.0446786992251873, 0.057171277701854706, -0.02174237184226513, 0.024808600544929504, -0.0902457907795906, 0.04720025509595871, 0.03271157667040825, 0.040548402816057205, -0.01177565660327673, -0.07541719824075699, 0.0008427884895354509, 0.018812336027622223, -0.02686868980526924, 0.031025780364871025, -0.0320693664252758, 0.021994752809405327, -0.0313553512096405, 0.016101595014333725, 0.025550907477736473, 0.014734489843249321, -0.009737599641084671, 0.03791225329041481, -0.010784100741147995, -0.06483308225870132, 0.061101265251636505, 0.047953490167856216, 0.07685820013284683, -0.029196662828326225, 0.046947311609983444, 0.09235607832670212, 0.07800130546092987, -0.006302011199295521, -0.0009652888402342796, -0.04047642648220062, 0.0128366993740201, -0.016137035563588142, -0.027006659656763077, -0.07809395343065262, -0.0027403784915804863, 0.036186158657073975, 0.07656095176935196, -0.0588720478117466, 0.04771272838115692, -0.05424800142645836, 0.045116785913705826, -0.06117294356226921, 0.0027035644743591547, -0.043144844472408295, 0.0031507040839642286, 0.01032280270010233, -0.007943928241729736, -0.08487361669540405, 0.008270769380033016, 0.061124444007873535, -0.009561609476804733, 0.06284376233816147, -0.032546862959861755, 0.024209581315517426, -0.0521618016064167, 0.0478111207485199, 0.05224037915468216, 0.0170973502099514, -0.00025255916989408433, 0.06748030334711075, 0.01784381829202175, 0.03854576125741005, -0.01574527658522129, 0.05557435005903244, 0.021215081214904785, 0.05812590941786766, -0.03631983697414398, 0.08400305360555649, 0.0049048843793570995, 0.022299831733107567, -0.04361032694578171, -0.018518105149269104, -0.05738044157624245, -0.011229591444134712, 0.054556168615818024, -0.01502198725938797, 0.036758773028850555, -0.012393850833177567, -0.07132650911808014, 0.009787950664758682, 0.006903296802192926, -0.03457719460129738, 0.01849413849413395, -0.019653771072626114, -0.010154089890420437, -0.017175186425447464, 0.004869726486504078, 0.03835383802652359, -0.03213905915617943, 0.002602529712021351, -0.06274056434631348, -0.007503214757889509, 0.07436785846948624, 0.029922567307949066, 0.0009115976863540709, 0.017791228368878365, -0.03598189353942871, -0.020124219357967377, -0.014733386225998402, 0.03255683556199074, -0.054067034274339676, 0.03698976710438728, 0.018945612013339996, 0.014479481615126133, 0.039849475026130676, 0.05157710611820221, 0.05078873783349991, 0.04381692782044411, 0.07326473295688629, 0.049577221274375916, -0.02244976907968521, 0.011073237285017967, -0.018045062199234962, -0.028601769357919693, 0.06952143460512161, 0.012588117271661758, 0.07383841276168823, 0.01095567550510168, 0.036695171147584915, 0.0011989291524514556, 0.0230939369648695, 0.039475031197071075, -0.06824479252099991, -0.0026624430902302265, -0.05834323540329933, -0.04346811771392822, 0.05579526722431183, -0.04245881736278534, 0.005693354178220034, 0.07567716389894485, 0.015919022262096405, 0.00976553838700056, -0.04408392310142517, -0.07399055361747742, 0.00877323653548956, -0.01970025524497032, -0.024491161108016968, -0.056170303374528885, 0.023915015161037445, 0.009995318949222565, -0.015454757958650589, -0.06276282668113708, 0.022573459893465042, 0.010586137883365154, -0.02963177300989628, -0.003725990653038025, -0.03391940891742706, 0.015885692089796066, 0.014557999558746815, -0.09824249893426895, 0.05735061690211296, -0.01336715929210186, -0.027765728533267975, -0.003085816977545619, 0.01335026603192091, 0.05057735741138458, -0.04743257910013199, -0.06328471750020981, -0.04051382839679718, -0.03455459699034691, 0.00980006530880928, -0.0031241802498698235, -0.03639649972319603, 0.059599846601486206, 0.04718916490674019, 0.026290176436305046}
		assert.False(t, e.SkipMatching())
	})
}

func TestUnmarshalEmbedding(t *testing.T) {
	t.Run("Ok", func(t *testing.T) {
		emb, err := UnmarshalEmbedding("[-0.013,-0.031]")

		assert.NoError(t, err)
		assert.Equal(t, Embedding{-0.013, -0.031}, emb)
	})
	t.Run("NoPrefix", func(t *testing.T) {
		emb, err := UnmarshalEmbedding("-0.013,-0.031]")

		assert.Error(t, err)
		assert.Nil(t, emb)
	})
	t.Run("InvalidValues", func(t *testing.T) {
		emb, err := UnmarshalEmbedding("[true, false]")

		assert.Error(t, err)
		assert.Equal(t, Embedding{0, 0}, emb)
	})
}
